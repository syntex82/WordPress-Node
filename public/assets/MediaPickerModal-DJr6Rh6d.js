import{r as o,j as e}from"./vendor-react-D2QycniR.js";import{ab as S,z as b,v as V,Z as j,X,V as A,a0 as Y,C as H,a4 as I}from"./index-DXwKa3Mi.js";function Z({isPlaying:s,color:l="#8B5CF6"}){return e.jsxs("div",{className:"flex items-end justify-center gap-[2px] h-16",children:[Array.from({length:32}).map((h,d)=>{const u=20+Math.sin(d*.5)*15+Math.random()*20;return e.jsx("div",{className:"w-1 rounded-full transition-all duration-150",style:{height:`${u}%`,background:`linear-gradient(to top, ${l}, ${l}88)`,animation:s?`wave ${.5+Math.random()*.5}s ease-in-out infinite alternate`:"none",animationDelay:`${d*.02}s`,opacity:s?1:.5}},d)}),e.jsx("style",{children:`
        @keyframes wave {
          0% { transform: scaleY(0.5); }
          100% { transform: scaleY(1); }
        }
      `})]})}function q({progress:s,size:l=120,strokeWidth:c=4,color:h="#8B5CF6"}){const d=(l-c)/2,u=d*2*Math.PI,p=u-s/100*u;return e.jsxs("svg",{width:l,height:l,className:"transform -rotate-90",children:[e.jsx("circle",{cx:l/2,cy:l/2,r:d,fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:c}),e.jsx("circle",{cx:l/2,cy:l/2,r:d,fill:"none",stroke:h,strokeWidth:c,strokeDasharray:u,strokeDashoffset:p,strokeLinecap:"round",className:"transition-all duration-300"})]})}function K({type:s,onSelect:l,onClose:c}){var F;const[h,d]=o.useState([]),[u,p]=o.useState(!0),[z,N]=o.useState(!1),[t,U]=o.useState(null),[m,f]=o.useState(!1),[y,w]=o.useState(0),[g,k]=o.useState(0),[v,P]=o.useState(80),i=o.useRef(null),x=o.useRef(null);o.useEffect(()=>{T()},[]),o.useEffect(()=>{i.current&&(i.current.pause(),i.current.currentTime=0),x.current&&(x.current.pause(),x.current.currentTime=0),f(!1),w(0),k(0)},[t]);const T=async()=>{try{let a=(await S.getAll()).data.data;s==="image"?a=a.filter(n=>n.mimeType.startsWith("image/")):s==="video"?a=a.filter(n=>n.mimeType.startsWith("video/")):s==="audio"&&(a=a.filter(n=>n.mimeType.startsWith("audio/"))),d(a)}catch{b.error("Failed to load media")}finally{p(!1)}},E=async r=>{const a=r.target.files;if(!a||a.length===0)return;N(!0);const n=Array.from(a).map($=>S.upload($));try{await Promise.all(n),b.success(`${a.length} file(s) uploaded`),T()}catch{b.error("Failed to upload files")}finally{N(!1)}},D=r=>{s==="image"||s==="gallery"?l(r):U(r)},R=()=>{s==="audio"&&i.current?(m?i.current.pause():i.current.play(),f(!m)):s==="video"&&x.current&&(m?x.current.pause():x.current.play(),f(!m))},_=()=>{i.current&&w(i.current.currentTime)},B=()=>{i.current&&k(i.current.duration)},W=r=>{if(!i.current||!g)return;const a=r.currentTarget.getBoundingClientRect(),n=(r.clientX-a.left)/a.width;i.current.currentTime=n*g},C=r=>{const a=Math.floor(r/60),n=Math.floor(r%60);return`${a}:${n.toString().padStart(2,"0")}`},L=()=>{t&&l(t)},M=g>0?y/g*100:0;return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl max-w-5xl w-full p-6 shadow-2xl border border-gray-700/50",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full",children:e.jsx(V,{size:24})}),e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-white flex items-center gap-3",children:[s==="audio"&&e.jsx(j,{className:"text-purple-400"}),s==="video"&&e.jsx("span",{children:"ðŸŽ¬"}),s==="image"&&e.jsx("span",{children:"ðŸ–¼ï¸"}),"Select ",s.charAt(0).toUpperCase()+s.slice(1)]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-xl cursor-pointer transition-all shadow-lg hover:shadow-purple-500/25 hover:scale-105",children:[e.jsx(X,{className:"mr-2",size:18}),"Upload ",s,e.jsx("input",{type:"file",multiple:!0,accept:s==="image"?"image/*":s==="video"?"video/*":s==="audio"?"audio/*":"*",onChange:E,className:"hidden"})]})}),z&&e.jsxs("div",{className:"flex items-center gap-2 text-purple-400 mb-4",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),"Uploading..."]}),u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"})}):h.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-50",children:s==="audio"?"ðŸŽµ":s==="video"?"ðŸŽ¬":"ðŸ–¼ï¸"}),e.jsxs("p",{children:["No ",s," files found"]}),e.jsx("p",{className:"text-sm mt-1",children:"Upload some to get started!"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-80 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-600",children:h.map(r=>e.jsxs("div",{onClick:()=>D(r),className:`group relative rounded-xl overflow-hidden cursor-pointer transition-all duration-300 ${(t==null?void 0:t.id)===r.id?"ring-2 ring-purple-500 ring-offset-2 ring-offset-gray-900 scale-95":"hover:scale-95 hover:ring-2 hover:ring-purple-400/50 hover:ring-offset-2 hover:ring-offset-gray-900"}`,children:[r.mimeType.startsWith("image/")?e.jsx("img",{src:r.path,alt:r.originalName,className:"w-full h-24 object-cover"}):r.mimeType.startsWith("video/")?e.jsxs("div",{className:"w-full h-24 bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1),transparent)]"}),e.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:"ðŸŽ¬"})]}):r.mimeType.startsWith("audio/")?e.jsxs("div",{className:"w-full h-24 bg-gradient-to-br from-violet-900 via-purple-900 to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"flex items-end justify-center gap-[2px] h-full p-2",children:Array.from({length:12}).map((a,n)=>e.jsx("div",{className:"w-1 bg-white/60 rounded-full",style:{height:`${30+Math.random()*50}%`}},n))})}),e.jsx(j,{size:28,className:"text-white/80 relative z-10 group-hover:scale-110 transition-transform"})]}):e.jsx("div",{className:"w-full h-24 bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“„"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("p",{className:"text-xs text-white/80 truncate",children:r.originalName})}),(t==null?void 0:t.id)===r.id&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx(A,{size:14,className:"text-white"})})]},r.id))})]}),(s==="audio"||s==="video")&&e.jsxs("div",{className:"w-96 border-l border-gray-700/50 pl-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-white/80",children:"Preview"}),t?e.jsxs("div",{className:"space-y-4",children:[s==="audio"&&e.jsxs("div",{className:"relative overflow-hidden rounded-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-indigo-700"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(255,255,255,0.15),transparent)]"}),e.jsx("div",{className:"absolute top-4 left-4 w-20 h-20 bg-white/10 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-8 right-8 w-32 h-32 bg-pink-500/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),e.jsxs("div",{className:"relative p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`w-32 h-32 rounded-full bg-gradient-to-br from-gray-800 to-gray-900 shadow-2xl flex items-center justify-center ${m?"animate-spin":""}`,style:{animationDuration:"3s"},children:[e.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-gray-700 to-gray-800"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(q,{progress:M,size:128,strokeWidth:3,color:"#A78BFA"})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900 z-10"}),e.jsx("div",{className:"absolute inset-6 rounded-full border border-gray-600/30"}),e.jsx("div",{className:"absolute inset-10 rounded-full border border-gray-600/20"}),e.jsx("div",{className:"absolute inset-14 rounded-full border border-gray-600/10"})]}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-white/20 to-transparent pointer-events-none"})]})}),e.jsx(Z,{isPlaying:m,color:"#A78BFA"}),e.jsx("audio",{ref:i,src:t.path,onTimeUpdate:_,onLoadedMetadata:B,onEnded:()=>f(!1),onError:r=>console.error("Audio load error:",t.path),className:"hidden"}),e.jsx("div",{className:"mt-4 h-1.5 bg-white/20 rounded-full overflow-hidden cursor-pointer",onClick:W,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-400 to-pink-400 rounded-full transition-all duration-100",style:{width:`${M}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-2",children:[e.jsx("span",{children:C(y)}),e.jsx("span",{children:C(g)})]}),e.jsx("div",{className:"flex items-center justify-center gap-4 mt-4",children:e.jsx("button",{onClick:R,className:"w-14 h-14 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 flex items-center justify-center transition-all hover:scale-110 shadow-lg",children:m?e.jsx(Y,{size:24,className:"text-white"}):e.jsx(H,{size:24,className:"text-white ml-1"})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[e.jsx(I,{size:16,className:"text-white/60"}),e.jsx("input",{type:"range",min:"0",max:"100",value:v,onChange:r=>{const a=Number(r.target.value);P(a),i.current&&(i.current.volume=a/100)},className:"w-24 h-1 rounded-full appearance-none bg-white/20 cursor-pointer",style:{background:`linear-gradient(to right, rgba(167,139,250,0.8) ${v}%, rgba(255,255,255,0.2) ${v}%)`}})]})]})]}),s==="video"&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black shadow-2xl ring-1 ring-white/10 relative",children:e.jsx("video",{ref:x,src:t.path,onEnded:()=>f(!1),onError:r=>console.error("Video load error:",t.path),className:"w-full aspect-video",controls:!0})}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-4 border border-gray-700/50",children:[e.jsx("p",{className:"font-medium text-white truncate",children:t.originalName}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-400",children:[e.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded-full text-xs",children:(F=t.mimeType.split("/")[1])==null?void 0:F.toUpperCase()}),t.size&&e.jsxs("span",{children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("button",{onClick:L,className:"w-full flex items-center justify-center gap-2 px-4 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white rounded-xl transition-all font-medium shadow-lg hover:shadow-green-500/25 hover:scale-[1.02]",children:[e.jsx(A,{size:20}),"Use This ",s==="audio"?"Track":"Video"]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500 py-16",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-purple-900/50 to-pink-900/50 flex items-center justify-center",children:s==="audio"?e.jsx(j,{size:32,className:"text-purple-400/50"}):e.jsx("span",{className:"text-4xl opacity-50",children:"ðŸŽ¬"})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-gray-600/30 animate-spin",style:{animationDuration:"10s"}})]}),e.jsxs("p",{className:"text-gray-400",children:["Click a ",s," file to preview"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Listen before selecting"})]})]})]})]})]})})}export{K as M};
