import{r as i,j as e,L as n}from"./vendor-react-D2QycniR.js";import{c9 as C,ay as v,j as p,cc as g,aR as y,bq as k}from"./index-DXwKa3Mi.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function S(){const[d,b]=i.useState([]),[f,m]=i.useState(!0),[x,u]=i.useState(null);i.useEffect(()=>{c()},[]);const c=async()=>{var s,t;try{m(!0),u(null);const{data:l}=await C.getCourses({limit:1e3}),N=(l==null?void 0:l.courses)||[],o=new Map;N.forEach(r=>{const a=r.category||"Uncategorized";o.has(a)||o.set(a,{name:a,courseCount:0,courses:[]});const h=o.get(a);h.courseCount++,h.courses.push({id:r.id,title:r.title,status:r.status})});const w=Array.from(o.values()).sort((r,a)=>a.courseCount!==r.courseCount?a.courseCount-r.courseCount:r.name.localeCompare(a.name));b(w)}catch(l){console.error("Failed to load categories:",l),u(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load categories")}finally{m(!1)}},j=s=>{switch(s){case"PUBLISHED":return"bg-green-500/20 text-green-400";case"DRAFT":return"bg-slate-500/20 text-slate-400";case"ARCHIVED":return"bg-yellow-500/20 text-yellow-400";default:return"bg-slate-500/20 text-slate-400"}};return e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Course Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-slate-400 mt-1",children:"Categories are automatically extracted from courses. Create a new course with a category to add it here."})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3 w-full sm:w-auto",children:[e.jsxs("button",{onClick:c,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-3 md:px-4 py-2.5 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 transition-colors text-sm",children:[e.jsx(v,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(n,{to:"/lms/courses/new",className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white px-3 md:px-4 py-2.5 rounded-xl hover:from-blue-700 hover:to-blue-600 shadow-lg shadow-blue-500/20 transition-all text-sm",children:[e.jsx(p,{size:18}),"New Course"]})]})]}),f?e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-8 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500"})}):x?e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:[e.jsx("p",{className:"text-red-400 font-medium",children:x}),e.jsx("button",{onClick:c,className:"mt-3 text-red-300 hover:text-red-200 font-medium transition-colors",children:"Try Again"})]}):d.length===0?e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-12 text-center",children:[e.jsx(g,{className:"mx-auto text-slate-600 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No categories yet"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Categories are created when you add a category to a course."}),e.jsxs(n,{to:"/lms/courses/new",className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 rounded-xl hover:from-blue-700 hover:to-blue-600 shadow-lg shadow-blue-500/20 transition-all",children:[e.jsx(p,{size:18}),"Create Course"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:d.map(s=>e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-xl bg-blue-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"text-blue-400",size:18})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:s.name}),e.jsxs("p",{className:"text-xs md:text-sm text-slate-400",children:[s.courseCount," ",s.courseCount===1?"course":"courses"]})]})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.courses.slice(0,3).map(t=>e.jsxs(n,{to:`/lms/courses/${t.id}`,className:"flex items-center justify-between p-2 rounded-xl hover:bg-slate-700/50 transition-colors group gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx(y,{className:"text-slate-500 flex-shrink-0",size:14}),e.jsx("span",{className:"text-xs md:text-sm text-slate-300 truncate",children:t.title})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full whitespace-nowrap ${j(t.status)}`,children:t.status})]},t.id)),s.courses.length>3&&e.jsxs("p",{className:"text-xs text-slate-500 pl-2",children:["+",s.courses.length-3," more courses"]})]})]}),e.jsx("div",{className:"px-4 md:px-6 py-3 bg-slate-700/30 border-t border-slate-700/50",children:e.jsxs(n,{to:`/lms/courses?category=${encodeURIComponent(s.name)}`,className:"flex items-center justify-center gap-2 text-xs md:text-sm text-blue-400 hover:text-blue-300 font-medium transition-colors",children:["View all courses",e.jsx(k,{size:14})]})})]},s.name))})]})}export{S as default};
