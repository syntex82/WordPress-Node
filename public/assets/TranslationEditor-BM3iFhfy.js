import{r as d,j as e}from"./vendor-react-D2QycniR.js";import{R as $,O as E,S as k,U as A,V as D,P as O,W as v}from"./index-4Xu9g3kZ.js";function V({contentType:s,contentId:x,originalTitle:w,originalSlug:R,originalContent:G,onSave:m}){const{languages:S,currentLanguage:I}=$(),[r,F]=d.useState(""),[l,c]=d.useState(null),[C,b]=d.useState(!1),[p,y]=d.useState(!1),[f,o]=d.useState(null),[L,h]=d.useState(!1),j=S.filter(a=>!a.isDefault);d.useEffect(()=>{if(!r)return;(async()=>{var i;b(!0),o(null);try{const t=`/i18n/translations/${s}s/${x}/${r}`,N=await v.get(t);N.data?c(N.data):c({[s==="product"?"name":"title"]:"",slug:"",[s==="product"||s==="course"?"description":"content"]:"",isPublished:!1})}catch(t){((i=t.response)==null?void 0:i.status)===404?c({[s==="product"?"name":"title"]:"",slug:"",[s==="product"||s==="course"?"description":"content"]:"",isPublished:!1}):o("Failed to load translation")}finally{b(!1)}})()},[r,x,s]);const P=async()=>{var a,i;if(!(!r||!l)){y(!0),o(null),h(!1);try{const t=`/i18n/translations/${s}s/${x}/${r}`;await v.put(t,l),h(!0),m==null||m(r,l),setTimeout(()=>h(!1),3e3)}catch(t){o(((i=(a=t.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to save translation")}finally{y(!1)}}},g=(a,i)=>{c(t=>t?{...t,[a]:i}:null)},n=s==="product"?"name":"title",u=s==="product"||s==="course"?"description":"content";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Translations"})]}),j.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No additional languages configured. Add languages in Settings."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Language"}),e.jsxs("select",{value:r,onChange:a=>F(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Choose a language..."}),j.map(a=>e.jsxs("option",{value:a.code,children:[a.flagEmoji," ",a.nativeName," (",a.name,")"]},a.code))]})]}),r&&e.jsx(e.Fragment,{children:C?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(k,{className:"w-6 h-6 animate-spin text-blue-600"})}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-md p-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:["Original (",n,"):"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:w})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n==="name"?"Name":"Title"}),e.jsx("input",{type:"text",value:l[n]||"",onChange:a=>g(n,a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:`Translated ${n}...`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:l.slug||"",onChange:a=>g("slug",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"translated-slug"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:u==="description"?"Description":"Content"}),e.jsx("textarea",{value:l[u]||"",onChange:a=>g(u,a.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:`Translated ${u}...`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isPublished",checked:l.isPublished,onChange:a=>g("isPublished",a.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"isPublished",className:"text-sm text-gray-700 dark:text-gray-300",children:"Publish this translation"})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(A,{className:"w-4 h-4"}),f]}),L&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[e.jsx(D,{className:"w-4 h-4"}),"Translation saved successfully!"]}),e.jsxs("button",{onClick:P,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(O,{className:"w-4 h-4"}),"Save Translation"]})]}):null})]})]})}export{V as T};
