import{r as i,j as e}from"./vendor-react-D2QycniR.js";import{c3 as c,aM as g,j as A,c4 as C,V as S,o as k,O as v,G as F,I as M}from"./index-Bpp1ZX0C.js";import{C as z}from"./ConfirmDialog-CIfAj9N-.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";const E=["US","CA","GB","DE","FR","AU","NZ","JP","KR","CN","IN","BR","MX"];function P(){const[p,j]=i.useState([]),[y,u]=i.useState(!0),[f,l]=i.useState(!1),[r,b]=i.useState(null),[o,d]=i.useState(null),[t,a]=i.useState({name:"",description:"",cost:"",freeAbove:"",minDays:"",maxDays:"",countries:"",isActive:!0,priority:"0"});i.useEffect(()=>{x()},[]);const x=async()=>{try{u(!0);const{data:s}=await c.getAll(!0);j(s)}catch(s){console.error("Failed to load shipping methods:",s)}finally{u(!1)}},m=()=>{a({name:"",description:"",cost:"",freeAbove:"",minDays:"",maxDays:"",countries:"",isActive:!0,priority:"0"}),b(null)},h=()=>{m(),l(!0)},N=s=>{b(s),a({name:s.name,description:s.description||"",cost:String(s.cost),freeAbove:s.freeAbove?String(s.freeAbove):"",minDays:s.minDays?String(s.minDays):"",maxDays:s.maxDays?String(s.maxDays):"",countries:s.countries||"",isActive:s.isActive,priority:String(s.priority)}),l(!0)},w=async s=>{s.preventDefault();try{const n={name:t.name,description:t.description||void 0,cost:parseFloat(t.cost),freeAbove:t.freeAbove?parseFloat(t.freeAbove):void 0,minDays:t.minDays?parseInt(t.minDays):void 0,maxDays:t.maxDays?parseInt(t.maxDays):void 0,countries:t.countries||void 0,isActive:t.isActive,priority:parseInt(t.priority)};r?await c.update(r.id,n):await c.create(n),l(!1),m(),x()}catch(n){console.error("Failed to save shipping method:",n)}},D=async()=>{if(o)try{await c.delete(o),d(null),x()}catch(s){console.error("Failed to delete shipping method:",s)}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(g,{className:"text-blue-400"})," Shipping Methods"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Configure shipping rates and delivery options"})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(A,{size:18})," Add Method"]})]}),e.jsx("div",{className:"grid gap-4",children:p.length===0?e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-8 text-center",children:[e.jsx(g,{className:"mx-auto text-slate-500 mb-3",size:48}),e.jsx("p",{className:"text-slate-400",children:"No shipping methods configured"}),e.jsx("button",{onClick:h,className:"mt-4 text-blue-400 hover:text-blue-300",children:"Add your first shipping method"})]}):p.map(s=>e.jsx("div",{className:`bg-slate-800/50 backdrop-blur rounded-xl border ${s.isActive?"border-slate-700/50":"border-red-500/30 opacity-60"} p-5`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name}),!s.isActive&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded",children:"Inactive"})]}),s.description&&e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-green-400",children:[e.jsx(C,{size:14}),e.jsxs("span",{children:["$",Number(s.cost).toFixed(2)]})]}),s.freeAbove&&e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-400",children:[e.jsx(S,{size:14}),e.jsxs("span",{children:["Free above $",Number(s.freeAbove).toFixed(2)]})]}),(s.minDays||s.maxDays)&&e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(k,{size:14}),e.jsx("span",{children:s.minDays&&s.maxDays?`${s.minDays}-${s.maxDays} days`:s.minDays?`${s.minDays}+ days`:`Up to ${s.maxDays} days`})]}),s.countries?e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(v,{size:14}),e.jsx("span",{children:s.countries})]}):e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(v,{size:14}),e.jsx("span",{children:"Worldwide"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(s),className:"p-2 text-slate-400 hover:text-blue-400 transition-colors",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>d(s.id),className:"p-2 text-slate-400 hover:text-red-400 transition-colors",children:e.jsx(M,{size:18})})]})]})},s.id))}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:r?"Edit Shipping Method":"Create Shipping Method"})}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>a({...t,name:s.target.value}),required:!0,className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"e.g., Standard Shipping"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:t.description,onChange:s=>a({...t,description:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"e.g., Delivered in 5-7 business days"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Cost ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.cost,onChange:s=>a({...t,cost:s.target.value}),required:!0,className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"5.99"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Free Above ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.freeAbove,onChange:s=>a({...t,freeAbove:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"50.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Min Days"}),e.jsx("input",{type:"number",min:"1",value:t.minDays,onChange:s=>a({...t,minDays:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Max Days"}),e.jsx("input",{type:"number",min:"1",value:t.maxDays,onChange:s=>a({...t,maxDays:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"7"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Countries (comma-separated codes, empty = all)"}),e.jsx("input",{type:"text",value:t.countries,onChange:s=>a({...t,countries:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"US, CA, GB"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Leave empty for worldwide shipping. Use: ",E.join(", ")]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Priority"}),e.jsx("input",{type:"number",min:"0",value:t.priority,onChange:s=>a({...t,priority:s.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white",placeholder:"0"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Lower = shown first"})]}),e.jsx("div",{className:"flex items-center pt-6",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:s=>a({...t,isActive:s.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-500"}),e.jsx("span",{className:"text-slate-300",children:"Active"})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),m()},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:r?"Update":"Create"})]})]})]})}),e.jsx(z,{isOpen:!!o,onCancel:()=>d(null),onConfirm:D,title:"Delete Shipping Method",message:"Are you sure you want to delete this shipping method? This action cannot be undone.",confirmText:"Delete",variant:"danger"})]})}export{P as default};
