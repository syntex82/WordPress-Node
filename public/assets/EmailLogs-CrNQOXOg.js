import{r as l,j as e}from"./vendor-react-D2QycniR.js";import{cq as w,z as C,bb as k,ay as A,M as P,m as I,v as y,U as R,o as T,V as M}from"./index-JNkgy8O1.js";import{L as V}from"./LoadingSpinner-BUnjBwPP.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function q(){var v;const[c,x]=l.useState([]),[a,m]=l.useState(null),[E,S]=l.useState(!0),[i,d]=l.useState(1),[o,D]=l.useState(1),[r,b]=l.useState({status:"",toEmail:""}),[j,F]=l.useState(!1),[s,p]=l.useState(null);l.useEffect(()=>{g(),N()},[i,r]);const g=async()=>{try{const t=await w.getLogs({page:i,limit:20,status:r.status||void 0,toEmail:r.toEmail||void 0});x(t.data.data||[]),D(t.data.totalPages||1)}catch{C.error("Failed to load email logs")}finally{S(!1)}},N=async()=>{try{const t=await w.getLogStats();m(t.data)}catch{console.error("Failed to load stats")}},L=t=>{switch(t){case"SENT":case"DELIVERED":return e.jsx(M,{className:"text-green-500"});case"FAILED":case"BOUNCED":return e.jsx(y,{className:"text-red-500"});case"PENDING":return e.jsx(T,{className:"text-yellow-500"});default:return e.jsx(R,{className:"text-gray-500"})}},f=t=>({SENT:"bg-green-500/20 text-green-400",DELIVERED:"bg-green-500/20 text-green-400",FAILED:"bg-red-500/20 text-red-400",BOUNCED:"bg-red-500/20 text-red-400",PENDING:"bg-yellow-500/20 text-yellow-400"})[t]||"bg-slate-500/20 text-slate-400",u=t=>new Date(t).toLocaleString();return E?e.jsx(V,{}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Email Logs"}),e.jsx("p",{className:"text-slate-400",children:"Track sent emails and delivery status"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>F(!j),className:"flex items-center gap-2 px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 transition-colors",children:[e.jsx(k,{})," Filters"]}),e.jsxs("button",{onClick:()=>{g(),N()},className:"flex items-center gap-2 px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 transition-colors",children:[e.jsx(A,{})," Refresh"]})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(n,{label:"Total Sent",value:a.total,color:"indigo"}),e.jsx(n,{label:"Delivered",value:a.sent+a.delivered,color:"green"}),e.jsx(n,{label:"Failed",value:a.failed,color:"red"}),e.jsx(n,{label:"Pending",value:a.pending,color:"yellow"}),e.jsx(n,{label:"Success Rate",value:`${a.successRate}%`,color:"blue"})]}),j&&e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Status"}),e.jsxs("select",{value:r.status,onChange:t=>{b({...r,status:t.target.value}),d(1)},className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"SENT",children:"Sent"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"PENDING",children:"Pending"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Recipient Email"}),e.jsx("input",{type:"text",value:r.toEmail,onChange:t=>{b({...r,toEmail:t.target.value}),d(1)},className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Search by email..."})]})]})}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700/30 border-b border-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Recipient"}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Subject"}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Template"}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Date"}),e.jsx("th",{className:"text-left p-4 font-medium text-slate-400",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(t=>{var h;return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${f(t.status)}`,children:[L(t.status)," ",t.status]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.toName||t.toEmail}),t.toName&&e.jsx("div",{className:"text-xs text-slate-500",children:t.toEmail})]}),e.jsx("td",{className:"p-4 text-sm max-w-xs truncate text-slate-300",children:t.subject}),e.jsx("td",{className:"p-4 text-sm text-slate-400",children:((h=t.template)==null?void 0:h.name)||"-"}),e.jsx("td",{className:"p-4 text-sm text-slate-400",children:u(t.createdAt)}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>p(t),className:"p-1 text-slate-400 hover:text-blue-400 transition-colors",title:"View Details",children:e.jsx(P,{})})})]},t.id)})})]}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{className:"mx-auto text-4xl text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400",children:"No email logs found"})]})]}),o>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>d(t=>Math.max(1,t-1)),disabled:i===1,className:"px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 disabled:opacity-50 transition-colors",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-slate-400",children:["Page ",i," of ",o]}),e.jsx("button",{onClick:()=>d(t=>Math.min(o,t+1)),disabled:i===o,className:"px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 disabled:opacity-50 transition-colors",children:"Next"})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-slate-700/50 w-full max-w-lg shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700/50",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Email Details"}),e.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-slate-700/50 rounded-xl text-slate-400 hover:text-white transition-colors",children:e.jsx(y,{})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${f(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"To"}),e.jsx("span",{className:"text-white",children:s.toEmail})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Subject"}),e.jsx("span",{className:"text-right max-w-xs truncate text-white",children:s.subject})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Template"}),e.jsx("span",{className:"text-white",children:((v=s.template)==null?void 0:v.name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Created"}),e.jsx("span",{className:"text-white",children:u(s.createdAt)})]}),s.sentAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Sent"}),e.jsx("span",{className:"text-white",children:u(s.sentAt)})]}),s.errorMessage&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3",children:e.jsxs("p",{className:"text-sm text-red-400",children:[e.jsx("strong",{children:"Error:"})," ",s.errorMessage]})})]})]})})]})}function n({label:c,value:x,color:a}){const m={indigo:"bg-indigo-500/10 text-indigo-400 border-indigo-500/30",green:"bg-green-500/10 text-green-400 border-green-500/30",red:"bg-red-500/10 text-red-400 border-red-500/30",yellow:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",blue:"bg-blue-500/10 text-blue-400 border-blue-500/30"};return e.jsxs("div",{className:`rounded-xl border p-4 ${m[a]}`,children:[e.jsx("p",{className:"text-sm opacity-75",children:c}),e.jsx("p",{className:"text-2xl font-bold",children:x})]})}export{q as default};
