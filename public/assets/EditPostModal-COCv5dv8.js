import{r as n,j as e}from"./vendor-react-D2QycniR.js";import{u as f,v,P as j,z as o,cg as w}from"./index-Bpp1ZX0C.js";function S({post:s,isOpen:h,onClose:r,onPostUpdated:c}){const{resolvedTheme:p}=f(),t=p==="dark",[l,d]=n.useState(""),[u,x]=n.useState(!0),[b,g]=n.useState(!1);if(n.useEffect(()=>{s&&(d(s.content||""),x(s.isPublic))},[s]),!h||!s)return null;const y=async()=>{var a,m;if(!l.trim()){o.error("Post content cannot be empty");return}g(!0);try{const i=await w.updatePost(s.id,{content:l.trim(),isPublic:u});o.success("Post updated successfully"),c==null||c(i.data),r()}catch(i){console.error("Failed to update post:",i),o.error(((m=(a=i.response)==null?void 0:a.data)==null?void 0:m.message)||"Failed to update post")}finally{g(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:`relative w-full max-w-lg rounded-2xl shadow-2xl ${t?"bg-slate-800":"bg-white"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-6 py-4 border-b ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:"Edit Post"}),e.jsx("button",{onClick:r,className:`p-2 rounded-full ${t?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:e.jsx(v,{className:`w-5 h-5 ${t?"text-slate-400":"text-gray-500"}`})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("textarea",{value:l,onChange:a=>d(a.target.value),placeholder:"What's on your mind?",rows:5,className:`w-full p-4 rounded-xl border resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-900 border-slate-700 text-white placeholder-slate-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400"}`}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("label",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"Visibility:"}),e.jsxs("select",{value:u?"public":"private",onChange:a=>x(a.target.value==="public"),className:`px-3 py-1.5 rounded-lg border text-sm ${t?"bg-slate-900 border-slate-700 text-white":"bg-white border-gray-200 text-gray-900"}`,children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private (Followers only)"})]})]})]}),e.jsxs("div",{className:`flex items-center justify-end gap-3 px-6 py-4 border-t ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsx("button",{onClick:r,className:`px-4 py-2 rounded-lg font-medium ${t?"text-slate-300 hover:bg-slate-700":"text-gray-600 hover:bg-gray-100"}`,children:"Cancel"}),e.jsxs("button",{onClick:y,disabled:b||!l.trim(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(j,{className:"w-4 h-4"}),b?"Saving...":"Save Changes"]})]})]})]})}export{S as E};
