import{h as w,r,j as e,L as x}from"./vendor-react-D2QycniR.js";import{c9 as o}from"./index-Bpp1ZX0C.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function Q(){const{courseId:a}=w(),[n,h]=r.useState(null),[u,p]=r.useState([]),[b,f]=r.useState(!0),[g,d]=r.useState(!1),[s,l]=r.useState(null);r.useEffect(()=>{c()},[a]);const c=async()=>{try{const[t,i]=await Promise.all([o.getCourse(a),o.getQuizzes(a)]);h(t.data),p(i.data)}catch(t){console.error("Failed to load data:",t)}finally{f(!1)}},j=async()=>{if(s!=null&&s.title)try{s.id?await o.updateQuiz(a,s.id,s):await o.createQuiz(a,s),d(!1),l(null),c()}catch(t){console.error("Failed to save quiz:",t)}},v=async t=>{if(confirm("Delete this quiz and all its questions?"))try{await o.deleteQuiz(a,t),c()}catch(i){console.error("Failed to delete quiz:",i)}},m=t=>{l(t||{title:"",description:"",timeLimitSeconds:void 0,attemptsAllowed:void 0,shuffleQuestions:!1,isRequired:!0}),d(!0)};return b?e.jsx("div",{className:"p-4 md:p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500"})}):e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(x,{to:"/lms/courses",className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:"← Back to Courses"}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent line-clamp-2",children:[n==null?void 0:n.title," - Quizzes"]})]}),e.jsx("button",{onClick:()=>m(),className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2.5 rounded-xl hover:from-blue-700 hover:to-blue-600 shadow-lg shadow-blue-500/20 transition-all",children:"Add Quiz"})]}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50",children:u.length===0?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"No quizzes yet. Add your first quiz!"}):e.jsx("ul",{className:"divide-y divide-slate-700/50",children:u.map(t=>{var i;return e.jsxs("li",{className:"p-3 md:p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-3 hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium text-white truncate",children:t.title}),e.jsxs("div",{className:"text-sm text-slate-400 flex flex-wrap items-center gap-x-2",children:[e.jsxs("span",{children:[((i=t._count)==null?void 0:i.questions)||0," questions"]}),t.timeLimitSeconds&&e.jsxs("span",{children:["• ",Math.floor(t.timeLimitSeconds/60)," min limit"]}),t.attemptsAllowed&&e.jsxs("span",{children:["• ",t.attemptsAllowed," attempts"]}),t.isRequired&&e.jsx("span",{className:"text-orange-400",children:"Required"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto sm:ml-0",children:[e.jsx(x,{to:`/lms/courses/${a}/quizzes/${t.id}/questions`,className:"text-purple-400 hover:text-purple-300 px-2 md:px-3 py-1 transition-colors text-sm",children:"Questions"}),e.jsx("button",{onClick:()=>m(t),className:"text-blue-400 hover:text-blue-300 px-2 md:px-3 py-1 transition-colors text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>v(t.id),className:"text-red-400 hover:text-red-300 px-2 md:px-3 py-1 transition-colors text-sm",children:"Delete"})]})]},t.id)})})}),g&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-slate-700/50 p-4 md:p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold mb-4 text-white",children:s.id?"Edit Quiz":"Add Quiz"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Title *"}),e.jsx("input",{type:"text",value:s.title||"",onChange:t=>l({...s,title:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Description"}),e.jsx("textarea",{value:s.description||"",onChange:t=>l({...s,description:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 h-20 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Time Limit (minutes)"}),e.jsx("input",{type:"number",value:s.timeLimitSeconds?s.timeLimitSeconds/60:"",onChange:t=>l({...s,timeLimitSeconds:t.target.value?parseInt(t.target.value)*60:void 0}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",min:"0",placeholder:"No limit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-slate-300",children:"Max Attempts"}),e.jsx("input",{type:"number",value:s.attemptsAllowed||"",onChange:t=>l({...s,attemptsAllowed:t.target.value?parseInt(t.target.value):void 0}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",min:"1",placeholder:"Unlimited"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:s.shuffleQuestions,onChange:t=>l({...s,shuffleQuestions:t.target.checked}),className:"rounded border-slate-600 bg-slate-700 text-blue-500 focus:ring-blue-500/50"}),e.jsx("span",{className:"text-sm",children:"Shuffle Questions"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:s.isRequired,onChange:t=>l({...s,isRequired:t.target.checked}),className:"rounded border-slate-600 bg-slate-700 text-blue-500 focus:ring-blue-500/50"}),e.jsx("span",{className:"text-sm",children:"Required for Completion"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"w-full sm:w-auto px-4 py-2.5 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"w-full sm:w-auto px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 shadow-lg shadow-blue-500/20 transition-all",children:"Save"})]})]})})]})}export{Q as default};
