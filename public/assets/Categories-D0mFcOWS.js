import{r as l,j as e}from"./vendor-react-D2QycniR.js";import{c1 as n}from"./index-Bpp1ZX0C.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function k(){const[i,b]=l.useState([]),[f,x]=l.useState(!0),[g,d]=l.useState(!1),[r,m]=l.useState(null),[s,o]=l.useState({name:"",description:"",parentId:""}),[u,h]=l.useState(!1);l.useEffect(()=>{c()},[]);const c=async()=>{try{x(!0);const{data:t}=await n.getAll();b(t)}catch(t){console.error("Failed to load categories:",t)}finally{x(!1)}},p=t=>{t?(m(t),o({name:t.name,description:t.description||"",parentId:t.parentId||""})):(m(null),o({name:"",description:"",parentId:""})),d(!0)},j=async t=>{t.preventDefault();try{h(!0);const a={name:s.name,description:s.description||void 0,parentId:s.parentId||void 0};r?await n.update(r.id,a):await n.create(a),d(!1),c()}catch(a){console.error("Failed to save category:",a),alert("Failed to save category")}finally{h(!1)}},v=async t=>{if(confirm("Are you sure you want to delete this category?"))try{await n.delete(t),c()}catch(a){console.error("Failed to delete category:",a)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Product Categories"}),e.jsx("button",{onClick:()=>p(),className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 rounded-xl hover:from-blue-700 hover:to-blue-600 transition-colors shadow-lg shadow-blue-500/20",children:"Add Category"})]}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 overflow-hidden",children:f?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500 mx-auto"})}):i.length===0?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"No categories found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Slug"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Parent"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-400",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/50",children:i.map(t=>{var a;return e.jsxs("tr",{className:"hover:bg-slate-700/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-white",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:t.slug}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:((a=t.parent)==null?void 0:a.name)||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(t),className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>v(t.id),className:"text-red-400 hover:text-red-300 text-sm transition-colors",children:"Delete"})]})})]},t.id)})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-slate-700/50 shadow-2xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:r?"Edit Category":"Add Category"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>o({...s,name:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>o({...s,description:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 h-20 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Parent Category"}),e.jsxs("select",{value:s.parentId,onChange:t=>o({...s,parentId:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"",children:"None"}),i.filter(t=>t.id!==(r==null?void 0:r.id)).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 disabled:opacity-50 transition-colors",children:u?"Saving...":"Save"})]})]})]})})]})}export{k as default};
