import{h as w,a as y,r as n,j as e}from"./vendor-react-D2QycniR.js";import{c9 as m,z as d,N as C,P as T,X as k}from"./index-Bpp1ZX0C.js";import{M as S}from"./MediaPickerModal-BzpR86Zn.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function D(){const{id:r}=w(),c=y(),i=r==="new",[g,p]=n.useState(!i),[b,h]=n.useState(!1),[f,x]=n.useState(!1),[l,s]=n.useState({name:"",isDefault:!1,logoUrl:"",primaryColor:"#6366f1",secondaryColor:"#a5b4fc",backgroundColor:"#f8fafc",textColor:"#1e293b",accentColor:"#6366f1",titleFont:"Helvetica-Bold",bodyFont:"Helvetica",titleFontSize:42,nameFontSize:36,courseFontSize:28,bodyFontSize:14,titleText:"Certificate of Completion",subtitleText:"This is to certify that",completionText:"has successfully completed the course",brandingText:"NodePress LMS",showBorder:!0,showLogo:!1,showBranding:!0,borderWidth:3,borderStyle:"double"});n.useEffect(()=>{!i&&r&&j()},[r]);const j=async()=>{try{const{data:t}=await m.getCertificateTemplate(r);s(t)}catch(t){console.error("Failed to load template:",t),d.error("Failed to load template"),c("/lms/certificate-templates")}finally{p(!1)}},v=async()=>{var t,o;if(!l.name.trim()){d.error("Template name is required");return}h(!0);try{i?(await m.createCertificateTemplate(l),d.success("Template created successfully")):(await m.updateCertificateTemplate(r,l),d.success("Template updated successfully")),c("/lms/certificate-templates")}catch(a){console.error("Failed to save template:",a);const u=((o=(t=a.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to save template";d.error(u)}finally{h(!1)}};return g?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500"})}):e.jsxs("div",{className:"min-h-screen bg-slate-900 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("button",{onClick:()=>c("/lms/certificate-templates"),className:"p-2 hover:bg-slate-700/50 rounded-xl transition-colors text-slate-400 hover:text-white",children:e.jsx(C,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:i?"New Certificate Template":"Edit Certificate Template"}),!i&&l.name&&e.jsx("p",{className:"text-sm text-slate-400 mt-1 line-clamp-1",children:l.name})]})]}),e.jsxs("button",{onClick:v,disabled:b,className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 rounded-xl hover:from-blue-500 hover:to-blue-400 flex items-center gap-2 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(T,{size:18}),b?"Saving...":"Save Template"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Basic Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>s({...l,name:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"e.g., Modern Blue Template"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isDefault",checked:l.isDefault,onChange:t=>s({...l,isDefault:t.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isDefault",className:"text-sm text-slate-300",children:"Set as default template"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Logo URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.logoUrl||"",onChange:t=>s({...l,logoUrl:t.target.value}),className:"flex-1 bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"/uploads/logo.png"}),e.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white rounded-xl transition-all shadow-lg shadow-blue-500/20",children:e.jsx(k,{size:18})})]}),l.logoUrl&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:l.logoUrl,alt:"Logo preview",className:"h-12 object-contain rounded border border-slate-600/50",onError:t=>t.target.style.display="none"})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Click the upload button to select from Media Library"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Colors"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{key:"primaryColor",label:"Primary Color"},{key:"secondaryColor",label:"Secondary Color"},{key:"backgroundColor",label:"Background"},{key:"textColor",label:"Text Color"},{key:"accentColor",label:"Accent Color"}].map(({key:t,label:o})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:l[t],onChange:a=>s({...l,[t]:a.target.value}),className:"w-12 h-10 rounded-lg border border-slate-600 bg-slate-700 cursor-pointer"}),e.jsx("input",{type:"text",value:l[t],onChange:a=>s({...l,[t]:a.target.value}),className:"flex-1 bg-slate-700/50 border border-slate-600/50 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]})]},t))})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Typography"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Title Font"}),e.jsxs("select",{value:l.titleFont,onChange:t=>s({...l,titleFont:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"Helvetica-Bold",children:"Helvetica Bold"}),e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"Times-Bold",children:"Times Bold"}),e.jsx("option",{value:"Times-Roman",children:"Times Roman"}),e.jsx("option",{value:"Courier-Bold",children:"Courier Bold"}),e.jsx("option",{value:"Courier",children:"Courier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Body Font"}),e.jsxs("select",{value:l.bodyFont,onChange:t=>s({...l,bodyFont:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"Helvetica-Bold",children:"Helvetica Bold"}),e.jsx("option",{value:"Times-Roman",children:"Times Roman"}),e.jsx("option",{value:"Times-Bold",children:"Times Bold"}),e.jsx("option",{value:"Courier",children:"Courier"}),e.jsx("option",{value:"Courier-Bold",children:"Courier Bold"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{key:"titleFontSize",label:"Title Size",min:20,max:72},{key:"nameFontSize",label:"Name Size",min:16,max:60},{key:"courseFontSize",label:"Course Size",min:14,max:48},{key:"bodyFontSize",label:"Body Size",min:10,max:24}].map(({key:t,label:o,min:a,max:u})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o}),e.jsx("input",{type:"number",min:a,max:u,value:l[t],onChange:N=>s({...l,[t]:parseInt(N.target.value)}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]},t))})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Text Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Title Text"}),e.jsx("input",{type:"text",value:l.titleText,onChange:t=>s({...l,titleText:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Subtitle Text"}),e.jsx("input",{type:"text",value:l.subtitleText,onChange:t=>s({...l,subtitleText:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Completion Text"}),e.jsx("input",{type:"text",value:l.completionText,onChange:t=>s({...l,completionText:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Branding Text"}),e.jsx("input",{type:"text",value:l.brandingText,onChange:t=>s({...l,brandingText:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Display Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showBorder",checked:l.showBorder,onChange:t=>s({...l,showBorder:t.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"showBorder",className:"text-sm text-slate-300",children:"Show Border"})]}),l.showBorder&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Border Width"}),e.jsx("input",{type:"number",min:1,max:10,value:l.borderWidth,onChange:t=>s({...l,borderWidth:parseInt(t.target.value)}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Border Style"}),e.jsxs("select",{value:l.borderStyle,onChange:t=>s({...l,borderStyle:t.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"double",children:"Double"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showLogo",checked:l.showLogo,onChange:t=>s({...l,showLogo:t.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"showLogo",className:"text-sm text-slate-300",children:"Show Logo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showBranding",checked:l.showBranding,onChange:t=>s({...l,showBranding:t.target.checked}),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"showBranding",className:"text-sm text-slate-300",children:"Show Branding Text"})]})]})]})]}),f&&e.jsx(S,{type:"image",onClose:()=>x(!1),onSelect:t=>{s({...l,logoUrl:t.path||t.url}),x(!1)}})]})}export{D as default};
