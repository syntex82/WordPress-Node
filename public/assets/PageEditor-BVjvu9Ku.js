import{a as y,h as j,r as c,j as e}from"./vendor-react-D2QycniR.js";import{x as $,q as u,z as i,N,O as P,M as w,P as S}from"./index-JNkgy8O1.js";import C from"./RichTextEditor-Dp7rka-S.js";import{T}from"./TranslationEditor-BJPXiFls.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";import"./MediaPickerModal-ZxCpEfPe.js";function I(){const m=y(),{id:r}=j(),t=$(),[x,g]=c.useState(!1),[d,h]=c.useState(!1),[s,o]=c.useState({title:"",content:"",slug:"",status:"DRAFT"});c.useEffect(()=>{r&&f()},[r]);const f=async()=>{try{const l=(await u.getById(r)).data;o({title:l.title,content:l.content,slug:l.slug,status:l.status})}catch{i.error("Failed to load page")}},p=async a=>{var l,b;a.preventDefault(),g(!0);try{const n={title:s.title,content:s.content,status:s.status};s.slug&&s.slug.trim()&&(n.slug=s.slug.trim().toLowerCase().replace(/\s+/g,"-")),r?(await u.update(r,n),i.success("Page updated successfully")):(await u.create(n),i.success("Page created successfully")),m("/pages")}catch(n){i.error(((b=(l=n.response)==null?void 0:l.data)==null?void 0:b.message)||"Failed to save page")}finally{g(!1)}},v=()=>{r?window.open(`http://localhost:3000/${s.slug}`,"_blank"):i.error("Please save the page first to preview")};return e.jsxs("div",{className:`min-h-screen ${t.bgPrimary}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>m("/pages"),className:`mr-4 p-2 rounded-xl ${t.textMuted} hover:${t.textPrimary} ${t.hoverBg} transition-all`,children:e.jsx(N,{size:24})}),e.jsx("h1",{className:`text-3xl font-bold ${t.textPrimary}`,children:r?"Edit Page":"Create New Page"})]}),e.jsxs("div",{className:"flex gap-3",children:[r&&e.jsxs("button",{type:"button",onClick:()=>h(!d),className:`flex items-center px-4 py-2 border rounded-xl transition-all ${d?"border-blue-500 bg-blue-500/20 text-blue-400":`${t.border} ${t.textSecondary} ${t.hoverBg}`}`,children:[e.jsx(P,{className:"mr-2",size:18}),"Translations"]}),e.jsxs("button",{type:"button",onClick:v,className:`flex items-center px-4 py-2 ${t.border} border rounded-xl ${t.textSecondary} ${t.hoverBg} transition-all`,children:[e.jsx(w,{className:"mr-2",size:18}),"Preview"]}),e.jsxs("button",{onClick:p,disabled:x,className:"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 shadow-lg shadow-blue-500/20 disabled:opacity-50 transition-all",children:[e.jsx(S,{className:"mr-2",size:18}),x?"Saving...":"Save"]})]})]}),r&&d&&e.jsx("div",{className:"mb-6",children:e.jsx(T,{contentType:"page",contentId:r,originalTitle:s.title,originalSlug:s.slug,originalContent:s.content})}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:`${t.bgCard} backdrop-blur rounded-xl ${t.border} border p-6`,children:[e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Page title",value:s.title,onChange:a=>o({...s,title:a.target.value}),className:`w-full text-3xl font-bold bg-transparent border-none focus:ring-0 focus:outline-none ${t.textPrimary} ${t.isDark?"placeholder-slate-500":"placeholder-gray-400"}`,required:!0})}),e.jsx("div",{className:"mb-6",children:e.jsx(C,{content:s.content,onChange:a=>o({...s,content:a}),placeholder:"Write your page content..."})})]}),e.jsxs("div",{className:`${t.bgCard} backdrop-blur rounded-xl ${t.border} border p-6`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${t.textPrimary}`,children:"Page Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.textSecondary} mb-2`,children:"Slug"}),e.jsx("input",{type:"text",value:s.slug,onChange:a=>o({...s,slug:a.target.value}),className:`w-full px-4 py-3 ${t.inputBg} ${t.border} border rounded-xl ${t.textPrimary} ${t.isDark?"placeholder-slate-500":"placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,placeholder:"page-url-slug"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.textSecondary} mb-2`,children:"Status"}),e.jsxs("select",{value:s.status,onChange:a=>o({...s,status:a.target.value}),className:`w-full px-4 py-3 ${t.inputBg} ${t.border} border rounded-xl ${t.textPrimary} focus:outline-none focus:ring-2 focus:ring-blue-500/50`,children:[e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PUBLISHED",children:"Published"})]})]})]})]})]})]})}export{I as default};
