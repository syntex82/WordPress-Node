import{h as w,a as y,r as i,j as e}from"./vendor-react-D2QycniR.js";import{p as u,z as o,N,O as S,M as C,P}from"./index-Bpp1ZX0C.js";import T from"./RichTextEditor-3YSX937c.js";import{T as k}from"./TranslationEditor-ChAYTAqs.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";import"./MediaPickerModal-BzpR86Zn.js";function I(){const{id:l}=w(),c=y(),[b,x]=i.useState(!1),[m,p]=i.useState(!1),[d,f]=i.useState(!1),[t,r]=i.useState({title:"",content:"",excerpt:"",status:"DRAFT",slug:""});i.useEffect(()=>{l&&g()},[l]);const g=async()=>{x(!0);try{const a=(await u.getById(l)).data;r({title:a.title,content:a.content,excerpt:a.excerpt||"",status:a.status,slug:a.slug})}catch{o.error("Failed to load post"),c("/posts")}finally{x(!1)}},v=async s=>{var a,h;if(s.preventDefault(),!t.title.trim()){o.error("Title is required");return}p(!0);try{const n={title:t.title,content:t.content,excerpt:t.excerpt,status:t.status};t.slug&&t.slug.trim()&&(n.slug=t.slug.trim().toLowerCase().replace(/\s+/g,"-")),l?(await u.update(l,n),o.success("Post updated successfully")):(await u.create(n),o.success("Post created successfully")),c("/posts")}catch(n){o.error(((h=(a=n.response)==null?void 0:a.data)==null?void 0:h.message)||"Failed to save post")}finally{p(!1)}},j=()=>{t.slug?window.open(`http://localhost:3000/post/${t.slug}`,"_blank"):o.error("Save the post first to preview")};return b?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})}):e.jsx("div",{className:"min-h-screen bg-slate-900",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c("/posts"),className:"mr-4 p-2 hover:bg-slate-700/50 rounded-xl text-slate-400 hover:text-white transition-all",children:e.jsx(N,{size:20})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:l?"Edit Post":"Create New Post"})]}),e.jsx("div",{className:"flex gap-2",children:l&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>f(!d),className:`flex items-center px-4 py-2 border rounded-xl transition-all ${d?"border-blue-500 bg-blue-500/20 text-blue-400":"border-slate-600/50 text-slate-300 hover:bg-slate-700/50 hover:text-white"}`,children:[e.jsx(S,{className:"mr-2",size:18}),"Translations"]}),e.jsxs("button",{onClick:j,className:"flex items-center px-4 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all",children:[e.jsx(C,{className:"mr-2",size:18}),"Preview"]})]})})]}),l&&d&&e.jsx("div",{className:"mb-6",children:e.jsx(k,{contentType:"post",contentId:l,originalTitle:t.title,originalSlug:t.slug,originalContent:t.content})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>r({...t,title:s.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Enter post title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Content"}),e.jsx(T,{content:t.content,onChange:s=>r({...t,content:s}),placeholder:"Write your post content..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Excerpt"}),e.jsx("textarea",{value:t.excerpt,onChange:s=>r({...t,excerpt:s.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",rows:3,placeholder:"Brief summary of the post (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slug"}),e.jsx("input",{type:"text",value:t.slug,onChange:s=>r({...t,slug:s.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"post-url-slug"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"URL-friendly version of the title. Leave empty to auto-generate."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:t.status,onChange:s=>r({...t,status:s.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PUBLISHED",children:"Published"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c("/posts"),className:"px-6 py-2 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 shadow-lg shadow-blue-500/20 disabled:opacity-50 transition-all",children:[e.jsx(P,{className:"mr-2",size:18}),m?"Saving...":"Save Post"]})]})]})]})})}export{I as default};
