import{h as w,a as $,r,j as e,L as o}from"./vendor-react-D2QycniR.js";import{u as k,aa as S,N as P,L as F,D as L,ad as A,am as B,o as T,cb as R,p as C,bO as D}from"./index-JNkgy8O1.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function z(){var h;const{slug:n}=w(),i=$(),{resolvedTheme:b}=k(),t=b==="dark",{user:E}=S(),[s,f]=r.useState(null),[c,j]=r.useState([]),[v,d]=r.useState(!0),[m,x]=r.useState(null);if(r.useEffect(()=>{if(!n)return;(async()=>{var g,u,p;d(!0),x(null);try{const l=await C.getBySlug(n);f(l.data);try{const N=await D.getRelatedPosts(l.data.id,4);j(((g=N.data)==null?void 0:g.items)||[])}catch{}}catch(l){x(((p=(u=l.response)==null?void 0:u.data)==null?void 0:p.message)||"Post not found")}finally{d(!1)}})()},[n]),v)return e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-slate-900":"bg-gray-50"}`,children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"})});if(m||!s)return e.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-slate-900 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Post Not Found"}),e.jsx("p",{className:"text-slate-500 mb-6",children:m||"The post you are looking for does not exist."}),e.jsx("button",{onClick:()=>i(-1),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700",children:"Go Back"})]});const y=Math.ceil((((h=s.content)==null?void 0:h.length)||0)/1e3);return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"}`,children:[e.jsx("header",{className:`sticky top-0 z-40 ${t?"bg-slate-900/95":"bg-white/95"} backdrop-blur border-b ${t?"border-slate-800":"border-gray-200"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>i(-1),className:`flex items-center gap-2 ${t?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:`p-2 rounded-lg ${t?"hover:bg-slate-800":"hover:bg-gray-100"}`,children:e.jsx(F,{className:`w-5 h-5 ${t?"text-slate-400":"text-gray-600"}`})}),e.jsx("button",{className:`p-2 rounded-lg ${t?"hover:bg-slate-800":"hover:bg-gray-100"}`,children:e.jsx(L,{className:`w-5 h-5 ${t?"text-slate-400":"text-gray-600"}`})})]})]})}),e.jsxs("article",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.featuredImage&&e.jsx("div",{className:"mb-8 rounded-2xl overflow-hidden",children:e.jsx("img",{src:s.featuredImage,alt:s.title,className:"w-full h-auto max-h-[500px] object-cover"})}),s.category&&e.jsx(o,{to:`/category/${s.category.slug}`,className:"inline-block px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm font-medium mb-4 hover:bg-blue-500/30",children:s.category.name}),e.jsx("h1",{className:`text-3xl md:text-4xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-8",children:[s.author&&e.jsxs(o,{to:`/u/${s.author.id}`,className:"flex items-center gap-3",children:[s.author.avatar?e.jsx("img",{src:s.author.avatar,alt:s.author.name,className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t?"bg-slate-700":"bg-gray-200"}`,children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:s.author.name}),s.author.headline&&e.jsx("p",{className:"text-sm text-slate-500",children:s.author.headline})]})]}),e.jsx("span",{className:`text-sm ${t?"text-slate-500":"text-gray-500"}`,children:"•"}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${t?"text-slate-400":"text-gray-500"}`,children:[e.jsx(B,{className:"w-4 h-4"}),new Date(s.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),e.jsx("span",{className:`text-sm ${t?"text-slate-500":"text-gray-500"}`,children:"•"}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${t?"text-slate-400":"text-gray-500"}`,children:[e.jsx(T,{className:"w-4 h-4"}),y," min read"]})]}),e.jsx("div",{className:`prose prose-lg max-w-none ${t?"prose-invert":""}`,style:t?{color:"#e2e8f0"}:void 0,dangerouslySetInnerHTML:{__html:s.content}}),t&&e.jsx("style",{children:`
            .prose-invert p, .prose-invert li, .prose-invert span { color: #cbd5e1 !important; }
            .prose-invert h1, .prose-invert h2, .prose-invert h3, .prose-invert h4, .prose-invert h5, .prose-invert h6 { color: #fff !important; }
            .prose-invert strong, .prose-invert b { color: #fff !important; }
            .prose-invert a { color: #60a5fa !important; }
            .prose-invert code { color: #f472b6 !important; }
            .prose-invert blockquote { color: #94a3b8 !important; border-left-color: #475569 !important; }
          `}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(R,{className:`w-4 h-4 ${t?"text-slate-500":"text-gray-500"}`}),s.tags.map(a=>e.jsxs(o,{to:`/tag/${a.slug}`,className:`px-3 py-1 rounded-full text-sm ${t?"bg-slate-800 text-slate-300 hover:bg-slate-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["#",a.name]},a.id))]})}),c.length>0&&e.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-700/50",children:[e.jsx("h3",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(a=>e.jsxs(o,{to:`/blog/${a.slug}`,className:`group rounded-xl overflow-hidden ${t?"bg-slate-800/50 hover:bg-slate-800":"bg-white hover:bg-gray-50"} border ${t?"border-slate-700/50":"border-gray-200"} transition-colors`,children:[a.image&&e.jsx("div",{className:"h-40 overflow-hidden",children:e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:`font-semibold line-clamp-2 ${t?"text-white":"text-gray-900"}`,children:a.title}),a.author&&e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["By ",a.author.name]})]})]},a.id))})]})]})]})}export{z as default};
