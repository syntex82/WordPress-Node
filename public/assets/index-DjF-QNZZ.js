import{r as i,j as e,L as A,e as T,f as w,N as U}from"./vendor-react-D2QycniR.js";import{aa as C,v as F,j as E,i as z,I as B}from"./index-DAV1T9UC.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";const R=()=>{var j,k,p;const{token:o}=C(),[d,v]=i.useState(null),[f,N]=i.useState(!0);return i.useEffect(()=>{(async()=>{try{const c=await fetch("/api/admin/ads/stats/overview",{headers:{Authorization:`Bearer ${o}`}});c.ok&&v(await c.json())}catch(c){console.error("Failed to fetch ad stats:",c)}finally{N(!1)}})()},[o]),f?e.jsx("div",{className:"p-6",children:"Loading ads dashboard..."}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ads Management"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(A,{to:"/ads/campaigns/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"New Campaign"}),e.jsx(A,{to:"/ads/zones/new",className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"New Zone"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(L,{title:"Advertisers",value:(d==null?void 0:d.totalAdvertisers)??0,link:"/ads/advertisers"}),e.jsx(L,{title:"Active Campaigns",value:(d==null?void 0:d.activeCampaigns)??0,link:"/ads/campaigns"}),e.jsx(L,{title:"Total Ads",value:(d==null?void 0:d.totalAds)??0,link:"/ads/ads"}),e.jsx(L,{title:"Ad Zones",value:(d==null?void 0:d.totalZones)??0,link:"/ads/zones"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Today's Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:((j=d==null?void 0:d.todayImpressions)==null?void 0:j.toLocaleString())??0}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:((k=d==null?void 0:d.todayClicks)==null?void 0:k.toLocaleString())??0}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[(((d==null?void 0:d.ctr)??0)*100).toFixed(2),"%"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"CTR"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:["$",((p=d==null?void 0:d.todayRevenue)==null?void 0:p.toFixed(2))??"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Revenue"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(A,{to:"/ads/house",className:"bg-green-50 dark:bg-green-900/30 rounded-lg shadow p-4 hover:shadow-md transition-shadow border border-green-200 dark:border-green-800",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300",children:"ðŸ  House Ads (FREE!)"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Your own promotional ads - no payment needed"})]}),e.jsxs(A,{to:"/ads/analytics",className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 hover:shadow-md transition-shadow border border-gray-200 dark:border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ðŸ“Š View Analytics"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Detailed performance reports"})]}),e.jsxs(A,{to:"/ads/advertisers",className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 hover:shadow-md transition-shadow border border-gray-200 dark:border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ðŸ‘¥ Manage Advertisers"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"External advertisers who pay you"})]})]})]})},L=({title:o,value:d,link:v})=>e.jsxs(A,{to:v,className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 hover:shadow-md transition-shadow border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:o})]}),P=()=>{const{token:o}=C(),[d,v]=i.useState([]),[f,N]=i.useState(!0),[j,k]=i.useState(""),[p,b]=i.useState(!1),[c,h]=i.useState({companyName:"",contactEmail:"",contactName:""}),[m,g]=i.useState(!1);i.useEffect(()=>{s()},[o,j]);const s=async()=>{try{const n=new URLSearchParams({search:j}),y=await fetch(`/api/admin/ads/advertisers?${n}`,{headers:{Authorization:`Bearer ${o}`}});if(y.ok){const l=await y.json();v(l.items||[])}}catch(n){console.error("Failed to fetch advertisers:",n)}finally{N(!1)}},x=async(n,y)=>{try{await fetch(`/api/admin/ads/advertisers/${n}/credit`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({amount:y,description:"Manual credit"})}),s()}catch(l){console.error("Failed to add credit:",l)}},r=async n=>{n.preventDefault(),g(!0);try{(await fetch("/api/admin/ads/advertisers",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(b(!1),h({companyName:"",contactEmail:"",contactName:""}),s())}catch(y){console.error("Failed to create advertiser:",y)}finally{g(!1)}};return f?e.jsx("div",{className:"p-6 text-gray-900 dark:text-white",children:"Loading advertisers..."}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Advertisers"}),e.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Advertiser"})]}),e.jsx("input",{type:"text",placeholder:"Search advertisers...",value:j,onChange:n=>k(n.target.value),className:"w-full max-w-md px-4 py-2 border rounded-lg bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-slate-400"}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden border border-gray-200 dark:border-slate-700",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Balance"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Campaigns"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:[d.map(n=>{var y;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:n.companyName}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-gray-900 dark:text-white",children:n.contactName}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:n.contactEmail})]}),e.jsxs("td",{className:"px-4 py-3 font-mono text-gray-900 dark:text-white",children:["$",n.balance.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:((y=n._count)==null?void 0:y.campaigns)??0}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-slate-300"}`,children:n.status})}),e.jsx("td",{className:"px-4 py-3 space-x-2",children:e.jsx("button",{onClick:()=>{const l=prompt("Enter credit amount:");l&&x(n.id,parseFloat(l))},className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Add Credit"})})]},n.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 dark:text-slate-400",children:"No advertisers found"})})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add Advertiser"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white",children:e.jsx(F,{size:24})})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",required:!0,value:c.companyName,onChange:n=>h({...c,companyName:n.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Contact Email *"}),e.jsx("input",{type:"email",required:!0,value:c.contactEmail,onChange:n=>h({...c,contactEmail:n.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Contact Name"}),e.jsx("input",{type:"text",value:c.contactName,onChange:n=>h({...c,contactName:n.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Creating...":"Create Advertiser"})]})]})]})})]})},D=()=>{const{token:o}=C(),[d,v]=i.useState([]),[f,N]=i.useState([]),[j,k]=i.useState(!0),[p,b]=i.useState(""),[c,h]=i.useState(!1),[m,g]=i.useState(!1),[s,x]=i.useState({name:"",advertiserId:"",type:"cpc",budget:100,dailyBudget:10,bidAmount:.5});i.useEffect(()=>{n(),r()},[o,p]);const r=async()=>{try{const t=await fetch("/api/admin/ads/advertisers?limit=100",{headers:{Authorization:`Bearer ${o}`}});if(t.ok){const u=await t.json();N(u.items||[])}}catch(t){console.error("Failed to fetch advertisers:",t)}},n=async()=>{try{const t=new URLSearchParams;p&&t.set("status",p);const u=await fetch(`/api/admin/ads/campaigns?${t}`,{headers:{Authorization:`Bearer ${o}`}});if(u.ok){const S=await u.json();v(S.items||[])}}catch(t){console.error("Failed to fetch campaigns:",t)}finally{k(!1)}},y=async(t,u)=>{const S=u==="active"?"paused":"active";try{await fetch(`/api/admin/ads/campaigns/${t}/status`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({status:S})}),n()}catch($){console.error("Failed to update status:",$)}},l=async t=>{t.preventDefault(),g(!0);try{(await fetch("/api/admin/ads/campaigns",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)})).ok&&(h(!1),x({name:"",advertiserId:"",type:"cpc",budget:100,dailyBudget:10,bidAmount:.5}),n())}catch(u){console.error("Failed to create campaign:",u)}finally{g(!1)}},a=(t,u)=>u===0?"0.00":(t/u*100).toFixed(2);return j?e.jsx("div",{className:"p-6 text-gray-900 dark:text-white",children:"Loading campaigns..."}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Campaigns"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Campaign"})]}),e.jsx("div",{className:"flex gap-2",children:["","active","paused","completed"].map(t=>e.jsx("button",{onClick:()=>b(t),className:`px-3 py-1 rounded-full text-sm ${p===t?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-slate-300"}`,children:t||"All"},t))}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-x-auto border border-gray-200 dark:border-slate-700",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Campaign"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Budget"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Spent"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Impr."}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Clicks"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"CTR"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-slate-300",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:[d.map(t=>{var u;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:((u=t.advertiser)==null?void 0:u.companyName)||"Unknown"})]}),e.jsx("td",{className:"px-4 py-3 uppercase text-sm text-gray-900 dark:text-white",children:t.type}),e.jsxs("td",{className:"px-4 py-3 font-mono text-gray-900 dark:text-white",children:["$",t.budget.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 font-mono text-gray-900 dark:text-white",children:["$",(t.spent||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:(t.impressions||0).toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:(t.clicks||0).toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-gray-900 dark:text-white",children:[a(t.clicks||0,t.impressions||0),"%"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":t.status==="paused"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400":"bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-slate-300"}`,children:t.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>y(t.id,t.status),className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:t.status==="active"?"Pause":"Activate"})})]},t.id)}),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500 dark:text-slate-400",children:"No campaigns found"})})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create Campaign"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white",children:e.jsx(F,{size:24})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Advertiser *"}),e.jsxs("select",{required:!0,value:s.advertiserId,onChange:t=>x({...s,advertiserId:t.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select advertiser..."}),f.map(t=>e.jsx("option",{value:t.id,children:t.companyName},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Campaign Name *"}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:t=>x({...s,name:t.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsxs("select",{value:s.type,onChange:t=>x({...s,type:t.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"cpc",children:"CPC (Cost Per Click)"}),e.jsx("option",{value:"cpm",children:"CPM (Cost Per 1000 Impressions)"}),e.jsx("option",{value:"cpa",children:"CPA (Cost Per Action)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Bid Amount ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:s.bidAmount,onChange:t=>x({...s,bidAmount:parseFloat(t.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Total Budget ($)"}),e.jsx("input",{type:"number",step:"1",min:"1",value:s.budget,onChange:t=>x({...s,budget:parseFloat(t.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Daily Budget ($)"}),e.jsx("input",{type:"number",step:"1",min:"1",value:s.dailyBudget,onChange:t=>x({...s,dailyBudget:parseFloat(t.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Creating...":"Create Campaign"})]})]})]})})]})},I=()=>{const{token:o}=C(),[d,v]=i.useState([]),[f,N]=i.useState([]),[j,k]=i.useState(!0),[p,b]=i.useState(""),[c,h]=i.useState(!1),[m,g]=i.useState(!1),[s,x]=i.useState({name:"",campaignId:"",type:"banner",format:"image",headline:"",description:"",destinationUrl:"",imageUrl:""});i.useEffect(()=>{n(),r()},[o,p]);const r=async()=>{try{const a=await fetch("/api/admin/ads/campaigns?limit=100",{headers:{Authorization:`Bearer ${o}`}});if(a.ok){const t=await a.json();N(t.items||[])}}catch(a){console.error("Failed to fetch campaigns:",a)}},n=async()=>{try{const a=new URLSearchParams;p&&a.set("type",p);const t=await fetch(`/api/admin/ads/ads?${a}`,{headers:{Authorization:`Bearer ${o}`}});if(t.ok){const u=await t.json();v(u.items||[])}}catch(a){console.error("Failed to fetch ads:",a)}finally{k(!1)}},y=async a=>{a.preventDefault(),g(!0);try{(await fetch("/api/admin/ads/ads",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)})).ok&&(h(!1),x({name:"",campaignId:"",type:"banner",format:"image",headline:"",description:"",destinationUrl:"",imageUrl:""}),n())}catch(t){console.error("Failed to create ad:",t)}finally{g(!1)}},l=(a,t)=>t===0?"0.00":(a/t*100).toFixed(2);return j?e.jsx("div",{className:"p-6 text-gray-900 dark:text-white",children:"Loading ads..."}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ads"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Ad"})]}),e.jsx("div",{className:"flex gap-2",children:["","banner","text","native","video","html"].map(a=>e.jsx("button",{onClick:()=>b(a),className:`px-3 py-1 rounded-full text-sm ${p===a?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-slate-300"}`,children:a||"All"},a))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.map(a=>{var t,u,S;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden border border-gray-200 dark:border-slate-700",children:[a.imageUrl&&e.jsx("div",{className:"h-32 bg-gray-100 dark:bg-slate-700",children:e.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-slate-300"}`,children:a.status})]}),a.headline&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 mb-2",children:a.headline}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-slate-400 mb-3",children:[e.jsx("div",{children:((t=a.campaign)==null?void 0:t.name)||"Unknown Campaign"}),e.jsx("div",{children:((S=(u=a.campaign)==null?void 0:u.advertiser)==null?void 0:S.companyName)||"Unknown Advertiser"})]}),e.jsxs("div",{className:"flex justify-between text-sm border-t border-gray-200 dark:border-slate-700 pt-2",children:[e.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:[a.type," â€¢ ",a.format]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[l(a.clicks||0,a.impressions||0),"% CTR"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-slate-500 mt-1",children:[e.jsxs("span",{children:[(a.impressions||0).toLocaleString()," impr"]}),e.jsxs("span",{children:[(a.clicks||0).toLocaleString()," clicks"]})]})]})]},a.id)}),d.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500 dark:text-slate-400",children:"No ads found"})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create Ad"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white",children:e.jsx(F,{size:24})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Campaign *"}),e.jsxs("select",{required:!0,value:s.campaignId,onChange:a=>x({...s,campaignId:a.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select campaign..."}),f.map(a=>{var t;return e.jsxs("option",{value:a.id,children:[a.name," - ",((t=a.advertiser)==null?void 0:t.companyName)||"Unknown"]},a.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Ad Name *"}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:a=>x({...s,name:a.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsxs("select",{value:s.type,onChange:a=>x({...s,type:a.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"banner",children:"Banner"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"native",children:"Native"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"html",children:"HTML"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Format"}),e.jsxs("select",{value:s.format,onChange:a=>x({...s,format:a.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"responsive",children:"Responsive"}),e.jsx("option",{value:"fixed",children:"Fixed Size"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Headline"}),e.jsx("input",{type:"text",value:s.headline,onChange:a=>x({...s,headline:a.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Destination URL *"}),e.jsx("input",{type:"url",required:!0,value:s.destinationUrl,onChange:a=>x({...s,destinationUrl:a.target.value}),placeholder:"https://example.com",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:s.imageUrl,onChange:a=>x({...s,imageUrl:a.target.value}),placeholder:"https://example.com/banner.jpg",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Creating...":"Create Ad"})]})]})]})})]})},M=()=>{const{token:o}=C(),[d,v]=i.useState([]),[f,N]=i.useState(!0),[j,k]=i.useState(!1),[p,b]=i.useState(!1),[c,h]=i.useState({name:"",description:"",position:"header",format:"banner",width:728,height:90});i.useEffect(()=>{m()},[o]);const m=async()=>{try{const r=await fetch("/api/admin/ads/zones",{headers:{Authorization:`Bearer ${o}`}});r.ok&&v(await r.json())}catch(r){console.error("Failed to fetch zones:",r)}finally{N(!1)}},g=async(r,n)=>{try{await fetch(`/api/admin/ads/zones/${r}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({isActive:!n})}),m()}catch(y){console.error("Failed to toggle zone:",y)}},s=async r=>{r.preventDefault(),b(!0);try{(await fetch("/api/admin/ads/zones",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(k(!1),h({name:"",description:"",position:"header",format:"banner",width:728,height:90}),m())}catch(n){console.error("Failed to create zone:",n)}finally{b(!1)}},x=r=>{const n=`<div data-ad-zone="${r.name}" data-format="${r.format}"></div>
<script src="/api/ads/loader.js" async><\/script>`;navigator.clipboard.writeText(n),alert("Embed code copied to clipboard!")};return f?e.jsx("div",{className:"p-6 text-gray-900 dark:text-white",children:"Loading zones..."}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ad Zones"}),e.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Zone"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.map(r=>{var n;return e.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow p-4 border-l-4 border border-gray-200 dark:border-slate-700 ${r.isActive?"border-l-green-500":"border-l-gray-300 dark:border-l-slate-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsx("button",{onClick:()=>g(r.id,r.isActive),className:`px-2 py-1 rounded text-xs ${r.isActive?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-gray-100 dark:bg-slate-600 text-gray-800 dark:text-slate-300"}`,children:r.isActive?"Active":"Inactive"})]}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 mb-2",children:r.description}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500 dark:text-slate-400 mb-3",children:[e.jsxs("div",{children:["ðŸ“ Position: ",r.position]}),e.jsxs("div",{children:["ðŸ“ Format: ",r.format]}),r.width&&r.height&&e.jsxs("div",{children:["ðŸ“ Size: ",r.width,"x",r.height,"px"]}),e.jsxs("div",{children:["ðŸ”— Placements: ",((n=r._count)==null?void 0:n.placements)??0]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>x(r),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Copy Embed Code"}),e.jsx("button",{className:"text-sm text-gray-600 dark:text-slate-400 hover:underline",children:"Edit"})]})]},r.id)}),d.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500 dark:text-slate-400",children:"No zones created yet"})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create Ad Zone"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-white",children:e.jsx(F,{size:24})})]}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Zone Name *"}),e.jsx("input",{type:"text",required:!0,value:c.name,onChange:r=>h({...c,name:r.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",placeholder:"e.g., header-banner, sidebar-ad"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:c.description,onChange:r=>h({...c,description:r.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Position"}),e.jsxs("select",{value:c.position,onChange:r=>h({...c,position:r.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"header",children:"Header"}),e.jsx("option",{value:"sidebar",children:"Sidebar"}),e.jsx("option",{value:"in-content",children:"In Content"}),e.jsx("option",{value:"footer",children:"Footer"}),e.jsx("option",{value:"popup",children:"Popup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Format"}),e.jsxs("select",{value:c.format,onChange:r=>h({...c,format:r.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"banner",children:"Banner (728x90)"}),e.jsx("option",{value:"rectangle",children:"Rectangle (300x250)"}),e.jsx("option",{value:"skyscraper",children:"Skyscraper (160x600)"}),e.jsx("option",{value:"leaderboard",children:"Leaderboard (970x90)"}),e.jsx("option",{value:"native",children:"Native"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Width (px)"}),e.jsx("input",{type:"number",value:c.width,onChange:r=>h({...c,width:parseInt(r.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Height (px)"}),e.jsx("input",{type:"number",value:c.height,onChange:r=>h({...c,height:parseInt(r.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Creating...":"Create Zone"})]})]})]})})]})},O=()=>{const{token:o}=C(),[d,v]=i.useState([]),[f,N]=i.useState([]),[j,k]=i.useState(!0),[p,b]=i.useState(!1),[c,h]=i.useState(!1),[m,g]=i.useState({name:"",type:"banner",format:"728x90",headline:"",description:"",imageUrl:"",targetUrl:"",ctaText:"Learn More",priority:100,zones:[]});i.useEffect(()=>{s(),x()},[o]);const s=async()=>{try{const a=await(await fetch("/api/admin/ads/house",{headers:{Authorization:`Bearer ${o}`}})).json();v(a.ads||[])}catch(l){console.error(l)}k(!1)},x=async()=>{try{const a=await(await fetch("/api/admin/ads/zones",{headers:{Authorization:`Bearer ${o}`}})).json();N(a.zones||a||[])}catch(l){console.error(l)}},r=async l=>{l.preventDefault(),h(!0);try{(await fetch("/api/admin/ads/house",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(b(!1),y(),s())}catch(a){console.error(a)}h(!1)},n=async l=>{confirm("Delete this house ad?")&&(await fetch(`/api/admin/ads/house/${l}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}),s())},y=()=>g({name:"",type:"banner",format:"728x90",headline:"",description:"",imageUrl:"",targetUrl:"",ctaText:"Learn More",priority:100,zones:[]});return j?e.jsx("div",{className:"p-6 text-gray-900 dark:text-white",children:"Loading..."}):e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ðŸ  House Ads"}),e.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"FREE - No payment required!"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(E,{})," Create House Ad"]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"ðŸ’¡ Tip:"})," House ads are YOUR OWN promotional banners. Use them to promote your products, newsletter, affiliate links, or anything else - completely FREE!"]})}),d.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-slate-400",children:"No house ads yet. Create your first free ad!"}):e.jsx("div",{className:"grid gap-4",children:d.map(l=>{var a,t;return e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex gap-4",children:[((a=l.ad)==null?void 0:a.imageUrl)&&e.jsx("img",{src:l.ad.imageUrl,alt:"",className:"w-24 h-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:(t=l.ad)==null?void 0:t.headline}),e.jsxs("a",{href:l.targetUrl,target:"_blank",className:"text-sm text-blue-600 flex items-center gap-1",children:[e.jsx(z,{})," ",l.targetUrl]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:[l.impressions.toLocaleString()," views"]}),e.jsxs("div",{className:"text-gray-500 dark:text-slate-400",children:[l.clicks," clicks (",l.ctr,"%)"]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${l.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-slate-700 dark:text-slate-300"}`,children:l.status}),e.jsx("button",{onClick:()=>n(l.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",children:e.jsx(B,{})})]})]})},l.id)})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create House Ad (FREE!)"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700 dark:text-slate-400 dark:hover:text-white",children:e.jsx(F,{size:24})})]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:l=>g({...m,name:l.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Headline"}),e.jsx("input",{type:"text",value:m.headline,onChange:l=>g({...m,headline:l.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Image URL"}),e.jsx("input",{type:"text",value:m.imageUrl,onChange:l=>g({...m,imageUrl:l.target.value}),placeholder:"/uploads/my-banner.jpg",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Target URL *"}),e.jsx("input",{type:"text",required:!0,value:m.targetUrl,onChange:l=>g({...m,targetUrl:l.target.value}),placeholder:"/shop/products",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsxs("select",{value:m.type,onChange:l=>g({...m,type:l.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"banner",children:"Banner"}),e.jsx("option",{value:"native",children:"Native"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Format"}),e.jsxs("select",{value:m.format,onChange:l=>g({...m,format:l.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"728x90",children:"728x90 (Leaderboard)"}),e.jsx("option",{value:"300x250",children:"300x250 (Rectangle)"}),e.jsx("option",{value:"160x600",children:"160x600 (Skyscraper)"}),e.jsx("option",{value:"320x50",children:"320x50 (Mobile)"})]})]})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Show in Zones"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:f.map(l=>e.jsxs("label",{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx("input",{type:"checkbox",checked:m.zones.includes(l.id),onChange:a=>g({...m,zones:a.target.checked?[...m.zones,l.id]:m.zones.filter(t=>t!==l.id)})}),l.name," (",l.format,")"]},l.id))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:c?"Creating...":"Create Free Ad"})]})]})]})})]})},Z=()=>{const{token:o}=C(),[d,v]=i.useState(30),[f,N]=i.useState([]),[j,k]=i.useState([]),[p,b]=i.useState([]),[c,h]=i.useState(!0);i.useEffect(()=>{m()},[o,d]);const m=async()=>{try{const[s,x]=await Promise.all([fetch(`/api/admin/ads/stats/earnings?days=${d}`,{headers:{Authorization:`Bearer ${o}`}}),fetch(`/api/admin/ads/stats/top-performers?days=${d}`,{headers:{Authorization:`Bearer ${o}`}})]);if(s.ok){const r=await s.json();N(r.daily||[])}if(x.ok){const r=await x.json();k(r.topAds||[]),b(r.topCampaigns||[])}}catch(s){console.error("Failed to fetch analytics:",s)}finally{h(!1)}},g=f.reduce((s,x)=>({impressions:s.impressions+x.impressions,clicks:s.clicks+x.clicks,revenue:s.revenue+x.revenue}),{impressions:0,clicks:0,revenue:0});return c?e.jsx("div",{className:"p-6",children:"Loading analytics..."}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ads Analytics"}),e.jsxs("select",{value:d,onChange:s=>v(Number(s.target.value)),className:"px-3 py-2 border rounded-lg bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Total Impressions"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g.impressions.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Total Clicks"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g.clicks.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Average CTR"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g.impressions>0?(g.clicks/g.impressions*100).toFixed(2):"0.00","%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Total Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",g.revenue.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Top Performing Ads"}),e.jsxs("div",{className:"space-y-3",children:[j.slice(0,5).map((s,x)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-slate-500",children:[x+1,"."]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[s.ctr.toFixed(2),"% CTR"]}),e.jsxs("span",{className:"text-gray-400 dark:text-slate-500 ml-2",children:["$",s.revenue.toFixed(2)]})]})]},s.id)),j.length===0&&e.jsx("div",{className:"text-gray-500 dark:text-slate-400 text-center py-4",children:"No data available"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4 border border-gray-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Top Campaigns"}),e.jsxs("div",{className:"space-y-3",children:[p.slice(0,5).map((s,x)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 dark:text-slate-500",children:[x+1,"."]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[s.clicks.toLocaleString()," clicks"]}),e.jsxs("span",{className:"text-gray-400 dark:text-slate-500 ml-2",children:["$",s.revenue.toFixed(2)]})]})]},s.id)),p.length===0&&e.jsx("div",{className:"text-gray-500 dark:text-slate-400 text-center py-4",children:"No data available"})]})]})]})]})},W=()=>e.jsxs(T,{children:[e.jsx(w,{index:!0,element:e.jsx(R,{})}),e.jsx(w,{path:"advertisers/*",element:e.jsx(P,{})}),e.jsx(w,{path:"campaigns/*",element:e.jsx(D,{})}),e.jsx(w,{path:"ads/*",element:e.jsx(I,{})}),e.jsx(w,{path:"zones/*",element:e.jsx(M,{})}),e.jsx(w,{path:"house/*",element:e.jsx(O,{})}),e.jsx(w,{path:"analytics",element:e.jsx(Z,{})}),e.jsx(w,{path:"*",element:e.jsx(U,{to:"/ads",replace:!0})})]});export{W as AdsManagement,W as default};
