import{r as d,j as e,L as i}from"./vendor-react-D2QycniR.js";import{cf as h}from"./index-Bwazbld5.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function v(){const[t,m]=d.useState(null),[n,b]=d.useState(!0),[x,o]=d.useState(null);d.useEffect(()=>{c()},[]);const c=async()=>{var s,a,l;try{o(null);const r=await h.getDashboard();m(r.data)}catch(r){console.error("Failed to load dashboard:",r),((s=r.response)==null?void 0:s.status)===401?o("Please log in to view your learning dashboard."):o(((l=(a=r.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to load dashboard. Please try again.")}finally{b(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-700 border-t-blue-500"})}):x?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:[e.jsx("p",{className:"text-red-400",children:x}),e.jsx("button",{onClick:c,className:"mt-2 text-red-400 hover:text-red-300 underline transition-colors",children:"Try Again"})]})}):t?e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent mb-4 md:mb-6",children:"My Learning Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-4 md:p-6",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-blue-400",children:t.stats.totalCourses}),e.jsx("div",{className:"text-slate-400 text-sm md:text-base",children:"Enrolled Courses"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-4 md:p-6",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-green-400",children:t.stats.completedCourses}),e.jsx("div",{className:"text-slate-400 text-sm md:text-base",children:"Completed"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-4 md:p-6",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-400",children:t.stats.totalCertificates}),e.jsx("div",{className:"text-slate-400 text-sm md:text-base",children:"Certificates"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 mb-6 md:mb-8",children:[e.jsxs("div",{className:"p-3 md:p-4 border-b border-slate-700/50 flex justify-between items-center",children:[e.jsx("h2",{className:"text-base md:text-lg font-bold text-white",children:"My Courses"}),e.jsx(i,{to:"/lms/catalog",className:"text-blue-400 hover:text-blue-300 text-xs md:text-sm transition-colors",children:"Browse More"})]}),t.enrollments.length===0?e.jsxs("div",{className:"p-6 md:p-8 text-center text-slate-400 text-sm md:text-base",children:["You haven't enrolled in any courses yet.",e.jsx(i,{to:"/lms/catalog",className:"text-blue-400 hover:text-blue-300 ml-2 transition-colors",children:"Browse courses"})]}):e.jsx("div",{className:"divide-y divide-slate-700/50",children:t.enrollments.map(s=>{var a,l;return e.jsxs("div",{className:"p-3 md:p-4 flex flex-col sm:flex-row items-start sm:items-center gap-3 md:gap-4 hover:bg-slate-700/30 transition-colors",children:[s.course.featuredImage?e.jsx("img",{src:s.course.featuredImage,alt:"",className:"w-full sm:w-20 h-32 sm:h-14 object-cover rounded-lg"}):e.jsx("div",{className:"w-full sm:w-20 h-32 sm:h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-2xl sm:text-base",children:"üìö"}),e.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[e.jsx("h3",{className:"font-medium text-white text-sm md:text-base",children:s.course.title}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 mt-1",children:[e.jsx("div",{className:"flex-1 max-w-xs",children:e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${((a=s.progress)==null?void 0:a.percent)||0}%`}})})}),e.jsxs("span",{className:"text-xs md:text-sm text-slate-400 whitespace-nowrap",children:[((l=s.progress)==null?void 0:l.percent)||0,"%"]})]})]}),e.jsx(i,{to:`/lms/learn/${s.courseId}`,className:"w-full sm:w-auto text-center bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2.5 rounded-xl hover:from-blue-700 hover:to-blue-600 text-xs md:text-sm transition-colors shadow-lg shadow-blue-500/20",children:s.status==="COMPLETED"?"Review":"Continue"})]},s.id)})})]}),t.certificates.length>0&&e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50",children:[e.jsx("div",{className:"p-3 md:p-4 border-b border-slate-700/50",children:e.jsx("h2",{className:"text-base md:text-lg font-bold text-white",children:"My Certificates"})}),e.jsx("div",{className:"divide-y divide-slate-700/50",children:t.certificates.map(s=>{var a;return e.jsxs("div",{className:"p-3 md:p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:"üèÜ"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-medium text-white text-sm md:text-base truncate",children:(a=s.course)==null?void 0:a.title}),e.jsxs("p",{className:"text-xs md:text-sm text-slate-400",children:["Issued ",new Date(s.issuedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-3 ml-auto sm:ml-0",children:[e.jsx(i,{to:`/lms/certificate/${s.id}`,className:"text-blue-400 hover:text-blue-300 text-xs md:text-sm transition-colors",children:"View"}),s.pdfUrl&&e.jsx("a",{href:s.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:text-green-300 text-xs md:text-sm transition-colors",children:"Download"})]})]},s.id)})})]})]}):e.jsx("div",{className:"p-4 md:p-6 text-slate-400",children:"No data available"})}export{v as default};
