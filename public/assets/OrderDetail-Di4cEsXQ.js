import{h as j,a as N,r as d,j as e}from"./vendor-react-D2QycniR.js";import{c2 as i}from"./index-DXwKa3Mi.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function S(){const{id:n}=j(),x=N(),[t,h]=d.useState(null),[u,o]=d.useState(!0),[c,r]=d.useState(!1);d.useEffect(()=>{n&&l(n)},[n]);const l=async s=>{try{o(!0);const{data:a}=await i.getById(s);h(a)}catch(a){console.error("Failed to load order:",a)}finally{o(!1)}},m=async s=>{if(t)try{r(!0),await i.updateStatus(t.id,s),l(t.id)}catch(a){console.error("Failed to update status:",a)}finally{r(!1)}},p=async()=>{if(!(!t||!confirm("Are you sure you want to refund this order?")))try{r(!0),await i.refund(t.id),l(t.id)}catch(s){console.error("Failed to refund order:",s),alert("Failed to refund order")}finally{r(!1)}},b=async()=>{if(!(!t||!confirm("Are you sure you want to cancel this order?")))try{r(!0),await i.cancel(t.id),l(t.id)}catch(s){console.error("Failed to cancel order:",s)}finally{r(!1)}};return u?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500"})}):t?e.jsxs("div",{className:"p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:["Order ",t.orderNumber]}),e.jsx("p",{className:"text-slate-400",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("button",{onClick:()=>x("/shop/orders"),className:"text-blue-400 hover:text-blue-300 transition-colors",children:"â† Back to Orders"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Order Items"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"text-left py-2 text-slate-400",children:"Product"}),e.jsx("th",{className:"text-right py-2 text-slate-400",children:"Price"}),e.jsx("th",{className:"text-right py-2 text-slate-400",children:"Qty"}),e.jsx("th",{className:"text-right py-2 text-slate-400",children:"Total"})]})}),e.jsx("tbody",{children:t.items.map(s=>e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsxs("td",{className:"py-2",children:[e.jsx("div",{className:"text-white",children:s.name}),s.sku&&e.jsxs("div",{className:"text-sm text-slate-500",children:["SKU: ",s.sku]})]}),e.jsxs("td",{className:"text-right py-2 text-slate-300",children:["$",Number(s.price).toFixed(2)]}),e.jsx("td",{className:"text-right py-2 text-slate-300",children:s.quantity}),e.jsxs("td",{className:"text-right py-2 text-white",children:["$",Number(s.total).toFixed(2)]})]},s.id))}),e.jsxs("tfoot",{className:"text-slate-300",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Subtotal"}),e.jsxs("td",{className:"text-right py-2",children:["$",Number(t.subtotal).toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Tax"}),e.jsxs("td",{className:"text-right py-2",children:["$",Number(t.tax).toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Shipping"}),e.jsxs("td",{className:"text-right py-2",children:["$",Number(t.shipping).toFixed(2)]})]}),Number(t.discount)>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Discount"}),e.jsxs("td",{className:"text-right py-2 text-green-400",children:["-$",Number(t.discount).toFixed(2)]})]}),e.jsxs("tr",{className:"font-bold text-white",children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Total"}),e.jsxs("td",{className:"text-right py-2",children:["$",Number(t.total).toFixed(2)]})]})]})]})]}),t.payments&&t.payments.length>0&&e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Payments"}),t.payments.map(s=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-700/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white",children:s.method}),e.jsx("div",{className:"text-sm text-slate-500",children:s.stripePaymentIntentId})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white",children:["$",Number(s.amount).toFixed(2)]}),e.jsx("div",{className:"text-sm text-slate-400",children:s.status})]})]},s.id))]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Status"}),e.jsxs("select",{value:t.status,onChange:s=>m(s.target.value),disabled:c,className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-xl px-3 py-2 mb-4 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),e.jsx("option",{value:"PROCESSING",children:"Processing"}),e.jsx("option",{value:"SHIPPED",children:"Shipped"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),e.jsxs("div",{className:"flex gap-2",children:[t.paymentStatus==="PAID"&&t.status!=="REFUNDED"&&e.jsx("button",{onClick:p,disabled:c,className:"flex-1 bg-orange-600 text-white px-3 py-2 rounded-xl text-sm hover:bg-orange-700 disabled:opacity-50 transition-colors",children:"Refund"}),t.status!=="CANCELLED"&&t.status!=="DELIVERED"&&e.jsx("button",{onClick:b,disabled:c,className:"flex-1 bg-red-600 text-white px-3 py-2 rounded-xl text-sm hover:bg-red-700 disabled:opacity-50 transition-colors",children:"Cancel"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Customer"}),e.jsx("p",{className:"text-slate-300",children:t.email})]})]})]})]}):e.jsx("div",{className:"p-6 text-slate-400",children:"Order not found"})}export{S as default};
