import{r as f,j as e}from"./vendor-react-D2QycniR.js";import{bQ as b,z as j,bs as O,T as N,c as Z,ay as ce,ae as Q,j as Y,A as _,h as de,bM as L,G as E,I as xe,bR as H,bS as J,bT as K,e as W,bF as me,b9 as pe,bA as G,d as U,bl as B,o as he}from"./index-4Xu9g3kZ.js";import{L as ue}from"./LoadingSpinner-BUnjBwPP.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";const v={pageHelp:{title:"About Recommendations",content:"Configure how content is recommended to your visitors. Set up rules, algorithms, and personalization to increase engagement."},addRule:{title:"Create Rule",content:"Add a new recommendation rule to control which content gets suggested based on algorithms and conditions."},clearCache:{title:"Clear Cache",content:"Remove cached recommendations to force fresh calculations. Useful after making major content changes."},refresh:{title:"Refresh Data",content:"Reload all recommendation data from the server."},rulesTab:{title:"Recommendation Rules",content:"Define rules that control which content is recommended where. Each rule specifies a source, target, and algorithm."},settingsTab:{title:"Settings",content:"Configure global recommendation settings like personalization, caching, and performance options."},analyticsTab:{title:"Analytics",content:"Track recommendation performance with clicks, impressions, and conversion metrics."}};function Re(){const[t,y]=f.useState(!0),[s,a]=f.useState("rules"),[l,g]=f.useState([]),[c,p]=f.useState(null),[n,P]=f.useState(null),[R,w]=f.useState(!1),[S,x]=f.useState(null);f.useEffect(()=>{k()},[]);const k=async()=>{var r,o;try{y(!0);const[i,h,I,se,ae,le]=await Promise.all([b.getRules(),b.getSettings(),b.getAnalytics({period:"week"}),b.getAnalyticsCTR("week"),b.getAnalyticsTop("week",10),b.getAnalyticsDaily("week")]),z=i.data;g(Array.isArray(z)?z:(z==null?void 0:z.rules)||[]),p(h.data||null);const d=I.data,u=se.data,M=ae.data,C=le.data,re=d!=null&&d.clicksByRecommendationType?Object.entries(d.clicksByRecommendationType).map(([m,A])=>({algorithm:m,clicks:A,impressions:(u==null?void 0:u.totalImpressions)||0,ctr:(u==null?void 0:u.totalImpressions)>0?A/u.totalImpressions:0})):[],ie=((M==null?void 0:M.topPerforming)||[]).map(m=>({contentId:m.contentId,contentType:m.contentType,title:m.title||m.name||"Unknown",clicks:m.clicks||0,impressions:(d==null?void 0:d.totalInteractions)||0,ctr:(d==null?void 0:d.totalInteractions)>0?m.clicks/d.totalInteractions:0})),D=(C==null?void 0:C.clickStats)||[],q=(C==null?void 0:C.interactionStats)||[],ne=new Set([...D.map(m=>m.date),...q.map(m=>m.date)]),oe=Array.from(ne).sort().map(m=>{var A,V;return{date:m,clicks:((A=D.find($=>$.date===m))==null?void 0:A.count)||0,impressions:((V=q.find($=>$.date===m))==null?void 0:V.count)||0}});P({totalClicks:(d==null?void 0:d.totalClicks)||0,totalImpressions:(u==null?void 0:u.totalImpressions)||(d==null?void 0:d.totalInteractions)||0,clickThroughRate:u!=null&&u.overallCTR?u.overallCTR/100:0,topPerforming:ie,byAlgorithm:re,dailyStats:oe})}catch(i){j.error(((o=(r=i.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to load recommendations data")}finally{y(!1)}},T=async r=>{var o,i;if(confirm("Are you sure you want to delete this rule?"))try{await b.deleteRule(r),j.success("Rule deleted"),g(l.filter(h=>h.id!==r))}catch(h){j.error(((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete rule")}},F=async()=>{var r,o;try{await b.clearCache(),j.success("Cache cleared successfully")}catch(i){j.error(((o=(r=i.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to clear cache")}},X=async r=>{var o,i;if(c)try{const h=!c[r];await b.updateSettings({[r]:h}),p({...c,[r]:h}),j.success(`${r.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase())} ${h?"enabled":"disabled"}`)}catch(h){j.error(((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update setting")}},ee=async r=>{var o,i;if(c)try{await b.updateSettings(r),p({...c,...r}),j.success("Performance settings saved")}catch(h){j.error(((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to save settings")}};if(t)return e.jsx(ue,{});const te=[{id:"rules",label:"Rules",icon:_,tooltip:v.rulesTab},{id:"settings",label:"Settings",icon:de,tooltip:v.settingsTab},{id:"analytics",label:"Analytics",icon:L,tooltip:v.analyticsTab}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg shadow-purple-500/20",children:e.jsx(O,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Recommendations"}),e.jsx(N,{title:v.pageHelp.title,content:v.pageHelp.content,position:"right",variant:"help",children:e.jsx("button",{className:"p-1 text-slate-400 hover:text-blue-400 transition-colors",children:e.jsx(Z,{size:18})})})]}),e.jsx("p",{className:"text-slate-400 mt-0.5",children:"Configure smart content recommendations for your visitors"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{title:v.refresh.title,content:v.refresh.content,position:"bottom",children:e.jsx("button",{onClick:k,className:"p-2.5 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-400 hover:text-white hover:bg-slate-700/50 transition-all",children:e.jsx(ce,{size:18})})}),e.jsx(N,{title:v.clearCache.title,content:v.clearCache.content,position:"bottom",children:e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 hover:text-white hover:bg-slate-700/50 transition-all",children:[e.jsx(Q,{size:16}),"Clear Cache"]})}),e.jsx(N,{title:v.addRule.title,content:v.addRule.content,position:"left",children:e.jsxs("button",{onClick:()=>{x(null),w(!0)},className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-500 hover:to-pink-400 shadow-lg shadow-purple-500/20 transition-all hover:scale-105",children:[e.jsx(Y,{size:18}),"Add Rule"]})})]})]}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-1.5",children:e.jsx("nav",{className:"flex gap-1",children:te.map(r=>{const o=r.icon,i=s===r.id;return e.jsx(N,{title:r.tooltip.title,content:r.tooltip.content,position:"bottom",children:e.jsxs("button",{onClick:()=>a(r.id),className:`flex items-center gap-2 px-5 py-3 rounded-xl font-medium transition-all ${i?"bg-gradient-to-r from-purple-600/20 to-pink-600/20 text-white border border-purple-500/30":"text-slate-400 hover:text-white hover:bg-slate-700/50"}`,children:[e.jsx(o,{size:18,className:i?"text-purple-400":""}),r.label]})},r.id)})})}),s==="rules"&&e.jsx(ge,{rules:l,onEdit:r=>{x(r),w(!0)},onDelete:T}),s==="settings"&&c&&e.jsx(je,{settings:c,onToggle:X,onUpdatePerformance:ee}),s==="analytics"&&n&&e.jsx(fe,{analytics:n}),R&&e.jsx(be,{rule:S,onClose:()=>w(!1),onSave:async r=>{var o,i;try{S?(await b.updateRule(S.id,r),j.success("Rule updated")):(await b.createRule(r),j.success("Rule created")),w(!1),k()}catch(h){j.error(((i=(o=h.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to save rule")}}})]})}function ge({rules:t,onEdit:y,onDelete:s}){const a={related:{label:"Related",color:"bg-blue-500/20 text-blue-400 border-blue-500/30",icon:e.jsx(B,{size:14})},trending:{label:"Trending",color:"bg-orange-500/20 text-orange-400 border-orange-500/30",icon:e.jsx(U,{size:14})},popular:{label:"Popular",color:"bg-pink-500/20 text-pink-400 border-pink-500/30",icon:e.jsx(G,{size:14})},personalized:{label:"Personal",color:"bg-purple-500/20 text-purple-400 border-purple-500/30",icon:e.jsx(O,{size:14})},manual:{label:"Manual",color:"bg-slate-500/20 text-slate-400 border-slate-500/30",icon:e.jsx(E,{size:14})},recent:{label:"Recent",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",icon:e.jsx(he,{size:14})}};return t.length===0?e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"text-purple-400",size:32})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Rules Configured"}),e.jsx("p",{className:"text-slate-400 mb-6 max-w-md mx-auto",children:"Create your first recommendation rule to start showing smart content suggestions to your visitors."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[e.jsx(Z,{size:14}),e.jsx("span",{children:'Click "Add Rule" above to get started'})]})]}):e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Rule"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Flow"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Algorithm"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/30",children:t.map(l=>{const g=a[l.algorithm]||a.related;return e.jsxs("tr",{className:"hover:bg-slate-700/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:l.description})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-1 bg-slate-700/50 rounded text-slate-300 capitalize",children:l.sourceType}),e.jsx("span",{className:"text-slate-500",children:"â†’"}),e.jsx("span",{className:"px-2 py-1 bg-slate-700/50 rounded text-slate-300 capitalize",children:l.targetType})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium border ${g.color}`,children:[g.icon,g.label]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-slate-700/50 rounded-lg text-white font-medium",children:l.priority})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${l.isActive?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-slate-600/20 text-slate-400 border border-slate-600/30"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l.isActive?"bg-emerald-400":"bg-slate-500"}`}),l.isActive?"Active":"Inactive"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(N,{content:"Edit rule",position:"top",children:e.jsx("button",{onClick:()=>y(l),className:"p-2 text-slate-400 hover:text-blue-400 hover:bg-blue-500/10 rounded-lg transition-all",children:e.jsx(E,{size:16})})}),e.jsx(N,{content:"Delete rule",position:"top",children:e.jsx("button",{onClick:()=>s(l.id),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:e.jsx(xe,{size:16})})})]})})]},l.id)})})]})})}function be({rule:t,onClose:y,onSave:s}){const[a,l]=f.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",sourceType:(t==null?void 0:t.sourceType)||"post",targetType:(t==null?void 0:t.targetType)||"post",algorithm:(t==null?void 0:t.algorithm)||"related",priority:(t==null?void 0:t.priority)||0,isActive:(t==null?void 0:t.isActive)??!0,settings:(t==null?void 0:t.settings)||{}}),g=n=>{n.preventDefault(),s(a)},c="w-full px-4 py-2.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all",p="block text-sm font-medium text-slate-300 mb-2";return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700/50 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-700/50 bg-gradient-to-r from-purple-600/10 to-pink-600/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:t?e.jsx(E,{className:"text-purple-400",size:20}):e.jsx(Y,{className:"text-purple-400",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit Rule":"Create New Rule"}),e.jsx("p",{className:"text-sm text-slate-400",children:t?"Modify recommendation rule settings":"Define how content is recommended"})]})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Rule Name"}),e.jsx("input",{type:"text",value:a.name,onChange:n=>l({...a,name:n.target.value}),className:c,placeholder:"e.g., Related Posts on Blog",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Description (Optional)"}),e.jsx("input",{type:"text",value:a.description,onChange:n=>l({...a,description:n.target.value}),className:c,placeholder:"Brief description of this rule's purpose"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Source Type"}),e.jsxs("select",{value:a.sourceType,onChange:n=>l({...a,sourceType:n.target.value}),className:c,children:[e.jsx("option",{value:"post",children:"Posts"}),e.jsx("option",{value:"page",children:"Pages"}),e.jsx("option",{value:"product",children:"Products"}),e.jsx("option",{value:"course",children:"Courses"}),e.jsx("option",{value:"category",children:"Category"}),e.jsx("option",{value:"global",children:"Global (All)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Target Type"}),e.jsxs("select",{value:a.targetType,onChange:n=>l({...a,targetType:n.target.value}),className:c,children:[e.jsx("option",{value:"post",children:"Posts"}),e.jsx("option",{value:"page",children:"Pages"}),e.jsx("option",{value:"product",children:"Products"}),e.jsx("option",{value:"course",children:"Courses"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Algorithm"}),e.jsxs("select",{value:a.algorithm,onChange:n=>l({...a,algorithm:n.target.value}),className:c,children:[e.jsx("option",{value:"related",children:"ðŸ”— Related Content"}),e.jsx("option",{value:"trending",children:"ðŸ“ˆ Trending"}),e.jsx("option",{value:"popular",children:"â­ Most Popular"}),e.jsx("option",{value:"personalized",children:"ðŸŽ¯ Personalized"}),e.jsx("option",{value:"recent",children:"ðŸ• Most Recent"}),e.jsx("option",{value:"manual",children:"âœï¸ Manual Selection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Priority (0-100)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:a.priority,onChange:n=>l({...a,priority:parseInt(n.target.value)}),className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-purple-500"}),e.jsx("span",{className:"w-12 text-center text-white font-medium bg-slate-700/50 rounded-lg py-1",children:a.priority})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Higher priority rules are evaluated first"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>l({...a,isActive:!a.isActive}),className:"text-2xl",children:a.isActive?e.jsx(H,{className:"text-emerald-400",size:28}):e.jsx(J,{className:"text-slate-500",size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:a.isActive?"Active":"Inactive"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Rule will ",a.isActive?"":"not ","be applied to recommendations"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-700/50",children:[e.jsx("button",{type:"button",onClick:y,className:"px-5 py-2.5 bg-slate-700/50 border border-slate-600/50 rounded-xl text-slate-300 hover:bg-slate-700 hover:text-white transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-500 hover:to-pink-400 shadow-lg shadow-purple-500/20 transition-all",children:t?"Save Changes":"Create Rule"})]})]})]})})}function je({settings:t,onToggle:y,onUpdatePerformance:s}){const[a,l]=f.useState({cacheDuration:t.cacheDuration||60,maxRecommendations:t.maxRecommendations||10,minScore:t.minScore||.1}),[g,c]=f.useState(!1),[p,n]=f.useState(!1),P=[{key:"enablePersonalization",label:"Personalization",desc:"Show personalized recommendations based on user browsing history",icon:e.jsx(O,{className:"text-purple-400",size:20}),color:"purple"},{key:"enableTrending",label:"Trending Content",desc:"Show trending content based on recent user interactions",icon:e.jsx(U,{className:"text-orange-400",size:20}),color:"orange"},{key:"enableRelated",label:"Related Content",desc:"Show related posts/products on content pages",icon:e.jsx(B,{className:"text-blue-400",size:20}),color:"blue"},{key:"cacheEnabled",label:"Caching",desc:"Cache recommendations for faster load times",icon:e.jsx(Q,{className:"text-cyan-400",size:20}),color:"cyan"}],R="w-full px-4 py-2.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white focus:ring-2 focus:ring-purple-500/50 transition-all",w=(x,k)=>{l(T=>({...T,[x]:k})),n(!0)},S=async()=>{c(!0);try{await s(a),n(!1)}finally{c(!1)}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:e.jsx(H,{className:"text-emerald-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Feature Toggles"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Click to enable or disable features"})]})]}),e.jsx("div",{className:"space-y-3",children:P.map(({key:x,label:k,desc:T,icon:F})=>e.jsx(N,{content:`Click to ${t[x]?"disable":"enable"} ${k.toLowerCase()}`,position:"right",children:e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border transition-all cursor-pointer hover:bg-slate-700/30 ${t[x]?"bg-slate-700/20 border-slate-600/50":"bg-slate-800/30 border-slate-700/30"}`,onClick:()=>y(x),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-700/50 rounded-lg",children:F}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:k}),e.jsx("p",{className:"text-xs text-slate-500",children:T})]})]}),e.jsx("button",{className:"text-2xl transition-transform hover:scale-110",children:t[x]?e.jsx(H,{className:"text-emerald-400",size:28}):e.jsx(J,{className:"text-slate-500",size:28})})]})},x))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:e.jsx(K,{className:"text-amber-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Performance"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Cache and display settings"})]})]}),p&&e.jsx("button",{onClick:S,disabled:g,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white text-sm font-medium rounded-lg hover:from-purple-500 hover:to-pink-400 shadow-lg shadow-purple-500/20 transition-all disabled:opacity-50",children:g?"Saving...":"Save Changes"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{content:"How long recommendations are cached before refreshing (1-1440 minutes)",position:"top",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Cache Duration"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"1",max:"1440",value:a.cacheDuration,onChange:x=>w("cacheDuration",parseInt(x.target.value)||60),className:R}),e.jsx("span",{className:"text-slate-500 text-sm whitespace-nowrap",children:"minutes"})]})]})}),e.jsx(N,{content:"Maximum number of items to show in recommendation widgets (1-50)",position:"top",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Max Recommendations"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"1",max:"50",value:a.maxRecommendations,onChange:x=>w("maxRecommendations",parseInt(x.target.value)||10),className:R}),e.jsx("span",{className:"text-slate-500 text-sm whitespace-nowrap",children:"items"})]})]})}),e.jsx(N,{content:"Minimum relevance score required for content to be recommended (0.0-1.0)",position:"top",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Minimum Score"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:a.minScore,onChange:x=>w("minScore",parseFloat(x.target.value)||.1),className:R}),e.jsx("span",{className:"text-slate-500 text-sm whitespace-nowrap",children:"0.0 - 1.0"})]})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 backdrop-blur rounded-2xl border border-purple-500/30 p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(W,{className:"text-purple-400",size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Pro Tip"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Enable personalization to boost engagement by up to 35%. Recommendations become more accurate as users interact with your content."})]})]})})]})]})}function fe({analytics:t}){const y=[{label:"Total Clicks",value:t.totalClicks.toLocaleString(),icon:e.jsx(W,{size:24}),color:"from-blue-500 to-cyan-400",bgGlow:"shadow-blue-500/20",tooltip:"Total number of times users clicked on recommendations"},{label:"Impressions",value:t.totalImpressions.toLocaleString(),icon:e.jsx(me,{size:24}),color:"from-emerald-500 to-green-400",bgGlow:"shadow-emerald-500/20",tooltip:"Total number of recommendation views"},{label:"Click-Through Rate",value:`${(t.clickThroughRate*100).toFixed(2)}%`,icon:e.jsx(pe,{size:24}),color:"from-purple-500 to-pink-400",bgGlow:"shadow-purple-500/20",tooltip:"Percentage of impressions that resulted in clicks"},{label:"Top Performers",value:t.topPerforming.length.toString(),icon:e.jsx(G,{size:24}),color:"from-orange-500 to-amber-400",bgGlow:"shadow-orange-500/20",tooltip:"Number of high-performing recommendation items"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map((s,a)=>e.jsx(N,{content:s.tooltip,position:"bottom",children:e.jsx("div",{className:`bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-5 hover:border-slate-600/50 transition-all hover:-translate-y-1 shadow-xl ${s.bgGlow}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.value})]}),e.jsx("div",{className:`bg-gradient-to-br ${s.color} text-white p-3.5 rounded-2xl shadow-lg`,children:s.icon})]})})},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(L,{className:"text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Performance Overview"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Clicks vs Impressions trend"})]})]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-slate-400",children:"Impressions"})]})]})]}),t.dailyStats.length===0?e.jsx("div",{className:"h-48 flex items-center justify-center border border-dashed border-slate-700/50 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(U,{className:"text-slate-600 mx-auto mb-2",size:32}),e.jsx("p",{className:"text-slate-500",children:"No trend data yet"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Data will appear as users interact"})]})}):e.jsx("div",{className:"h-48 flex items-end gap-1 px-2",children:t.dailyStats.map((s,a)=>{const l=Math.max(...t.dailyStats.flatMap(p=>[p.clicks,p.impressions]),1),g=s.clicks/l*100,c=s.impressions/l*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsxs("div",{className:"w-full flex gap-0.5 items-end h-36",children:[e.jsx("div",{className:"flex-1 bg-gradient-to-t from-blue-600 to-blue-400 rounded-t transition-all hover:opacity-80",style:{height:`${Math.max(g,2)}%`},title:`Clicks: ${s.clicks}`}),e.jsx("div",{className:"flex-1 bg-gradient-to-t from-emerald-600 to-emerald-400 rounded-t transition-all hover:opacity-80",style:{height:`${Math.max(c,2)}%`},title:`Impressions: ${s.impressions}`})]}),e.jsx("span",{className:"text-[10px] text-slate-500 truncate w-full text-center",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 whitespace-nowrap",children:[e.jsx("p",{className:"text-xs text-white font-medium",children:new Date(s.date).toLocaleDateString()}),e.jsxs("p",{className:"text-xs text-blue-400",children:["Clicks: ",s.clicks]}),e.jsxs("p",{className:"text-xs text-emerald-400",children:["Impressions: ",s.impressions]})]})]},a)})})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(K,{className:"text-purple-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Algorithm Performance"}),e.jsx("p",{className:"text-sm text-slate-400",children:"CTR by recommendation type"})]})]}),t.byAlgorithm.length===0?e.jsx("div",{className:"h-48 flex items-center justify-center border border-dashed border-slate-700/50 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"text-slate-600 mx-auto mb-2",size:32}),e.jsx("p",{className:"text-slate-500",children:"No algorithm data yet"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Performance by algorithm will appear here"})]})}):e.jsx("div",{className:"space-y-3",children:t.byAlgorithm.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-24 text-sm text-slate-400 capitalize",children:s.algorithm}),e.jsx("div",{className:"flex-1 h-3 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full",style:{width:`${Math.min(s.ctr*100,100)}%`}})}),e.jsxs("span",{className:"w-16 text-right text-sm text-white font-medium",children:[(s.ctr*100).toFixed(1),"%"]})]},a))})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-2xl border border-slate-700/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-700/50 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:e.jsx(G,{className:"text-amber-400",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Top Performing Content"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Recommendations with highest engagement"})]})]})}),t.topPerforming.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-700/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"text-slate-500",size:32})}),e.jsx("h4",{className:"text-lg font-medium text-white mb-2",children:"No Data Yet"}),e.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Performance data will appear here once users start interacting with your recommendations."})]}):e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Content"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Clicks"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Impressions"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"CTR"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/30",children:t.topPerforming.slice(0,10).map((s,a)=>e.jsxs("tr",{className:"hover:bg-slate-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-slate-700/50 rounded-lg flex items-center justify-center text-xs text-slate-400",children:a+1}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-white",children:s.title||s.contentId.slice(0,20)}),e.jsxs("span",{className:"block font-mono text-xs text-slate-500",children:[s.contentId.slice(0,12),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-slate-700/50 rounded text-xs text-slate-300 capitalize",children:s.contentType})}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-300",children:s.clicks.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-300",children:s.impressions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`font-medium ${s.ctr>=.05?"text-emerald-400":s.ctr>=.02?"text-amber-400":"text-slate-400"}`,children:[(s.ctr*100).toFixed(2),"%"]})})]},a))})]})]})]})}export{Re as default};
