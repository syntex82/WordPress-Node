import{h as g,r as i,j as e,L as d}from"./vendor-react-D2QycniR.js";import{cf as N,z as x,N as v,V as w,af as y,L as C}from"./index-DXwKa3Mi.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function V(){var o,c;const{courseId:s}=g(),[t,m]=i.useState(null),[f,u]=i.useState(!0),[b,l]=i.useState(!1);i.useEffect(()=>{h()},[s]);const h=async()=>{var a,n;if(s)try{l(!0);const{data:r}=await N.requestCertificate(s);m(r)}catch(r){console.error("Failed to get certificate:",r);const j=((n=(a=r.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to generate certificate";x.error(j)}finally{u(!1),l(!1)}},p=()=>{if(!t)return;const a=`${window.location.origin}/lms/verify/${t.verificationHash}`;navigator.clipboard.writeText(a),x.success("Verification link copied to clipboard!")};return f?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-700 border-t-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:b?"Generating your certificate...":"Loading..."})]})}):t?e.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[e.jsxs(d,{to:`/lms/learn/${s}`,className:"text-blue-400 hover:text-blue-300 flex items-center gap-1 mb-6 transition-colors text-sm md:text-base",children:[e.jsx(v,{})," Back to Course"]}),e.jsx("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-4 md:border-8 border-double border-yellow-500/50 rounded-xl md:rounded-2xl p-4 md:p-8 shadow-2xl mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-yellow-400 text-4xl md:text-5xl mb-4",children:"üèÜ"}),e.jsx("h1",{className:"text-xl md:text-3xl font-serif font-bold text-white mb-2",children:"Certificate of Completion"}),e.jsx("p",{className:"text-slate-400 mb-4 md:mb-6 text-sm md:text-base",children:"This certifies that"}),e.jsx("p",{className:"text-lg md:text-2xl font-bold text-blue-400 mb-4 md:mb-6 break-words",children:((o=t.user)==null?void 0:o.name)||"Student"}),e.jsx("p",{className:"text-slate-400 mb-2 text-sm md:text-base",children:"has successfully completed"}),e.jsx("p",{className:"text-base md:text-xl font-semibold text-white mb-4 md:mb-6 break-words",children:((c=t.course)==null?void 0:c.title)||"Course"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 md:gap-8 text-sm text-slate-400 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-300",children:"Date Issued"}),e.jsx("p",{children:new Date(t.issuedAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-300",children:"Certificate ID"}),e.jsx("p",{className:"font-mono",children:t.certificateNumber})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[e.jsx(w,{})," Verified"]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 md:gap-4",children:[t.pdfUrl&&e.jsxs("a",{href:t.pdfUrl,download:!0,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 md:px-6 py-2.5 md:py-3 rounded-xl hover:from-blue-700 hover:to-blue-600 transition-colors shadow-lg shadow-blue-500/20 text-sm md:text-base",children:[e.jsx(y,{})," Download PDF"]}),e.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 bg-slate-800/50 border border-slate-700/50 text-slate-300 px-4 md:px-6 py-2.5 md:py-3 rounded-xl hover:bg-slate-700/50 transition-colors text-sm md:text-base",children:[e.jsx(C,{})," Share Verification Link"]})]}),e.jsxs("p",{className:"text-center text-xs md:text-sm text-slate-500 mt-6 break-all px-2",children:["Verify this certificate at: ",window.location.origin,"/lms/verify/",t.verificationHash]})]}):e.jsxs("div",{className:"p-4 md:p-6 max-w-2xl mx-auto text-center",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white mb-4",children:"Certificate Not Available"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"You need to complete the course to receive a certificate."}),e.jsx(d,{to:`/lms/learn/${s}`,className:"text-blue-400 hover:text-blue-300 transition-colors",children:"‚Üê Back to Course"})]})}export{V as default};
