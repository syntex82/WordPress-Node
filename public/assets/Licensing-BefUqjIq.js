import{r as l,j as e}from"./vendor-react-D2QycniR.js";import{W as x,z as r,ay as h,bG as w,V as p,c3 as E,b as S,aX as L,v as R}from"./index-JNkgy8O1.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function I(){const[j,N]=l.useState([]),[t,u]=l.useState(null),[g,n]=l.useState(!0),[i,v]=l.useState("all"),[y,d]=l.useState(null);l.useEffect(()=>{c()},[]);const c=async()=>{try{n(!0);const[s,a]=await Promise.all([x.get("/licensing/admin/licenses"),x.get("/licensing/admin/stats")]);N(s.data),u(a.data)}catch{r.error("Failed to load licensing data")}finally{n(!1)}},b=(s,a)=>{navigator.clipboard.writeText(s),d(a),setTimeout(()=>d(null),2e3)},f=async s=>{if(confirm("Are you sure you want to revoke this license?"))try{await x.post(`/licensing/admin/licenses/${s}/revoke`),r.success("License revoked"),c()}catch{r.error("Failed to revoke license")}},m=j.filter(s=>i==="active"?s.status==="ACTIVE":i==="expired"?s.status==="EXPIRED"||s.status==="REVOKED":!0),o={PERSONAL:"bg-blue-500",PROFESSIONAL:"bg-purple-500",BUSINESS:"bg-orange-500",ENTERPRISE:"bg-green-500"};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(h,{className:"w-8 h-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"License Management"}),e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center gap-2",children:[e.jsx(h,{})," Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Licenses"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.totalLicenses)||0})]})]})}),e.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Active Licenses"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.activeLicenses)||0})]})]})}),e.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(E,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(t==null?void 0:t.revenue)||0]})]})]})}),e.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(S,{className:"w-6 h-6 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"By Tier"}),e.jsx("div",{className:"flex gap-2 text-xs mt-1",children:(t==null?void 0:t.byTier)&&Object.entries(t.byTier).map(([s,a])=>e.jsxs("span",{className:`px-2 py-0.5 rounded ${o[s]} text-white`,children:[s.slice(0,3),": ",a]},s))})]})]})})]}),e.jsx("div",{className:"flex gap-2",children:["all","active","expired"].map(s=>e.jsx("button",{onClick:()=>v(s),className:`px-4 py-2 rounded-lg capitalize ${i===s?"bg-blue-600 text-white":"bg-slate-700 text-slate-300"}`,children:s},s))}),e.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"License Key"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Tier"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Activations"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Expires"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-slate-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:m.map(s=>{var a;return e.jsxs("tr",{className:"hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"text-sm text-blue-400 font-mono",children:[s.licenseKey.slice(0,20),"..."]}),e.jsx("button",{onClick:()=>b(s.licenseKey,s.id),className:"text-slate-400 hover:text-white",children:y===s.id?e.jsx(p,{className:"text-green-400"}):e.jsx(L,{})})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs text-white ${o[s.tier]}`,children:s.tier})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:s.customerName||s.email}),s.companyName&&e.jsx("p",{className:"text-slate-400 text-xs",children:s.companyName})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="ACTIVE"?"bg-green-500/20 text-green-400":s.status==="EXPIRED"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:s.status})}),e.jsxs("td",{className:"px-4 py-3 text-slate-300 text-sm",children:[((a=s.activatedDomains)==null?void 0:a.length)||0," / ",s.maxActivations===-1?"âˆž":s.maxActivations]}),e.jsx("td",{className:"px-4 py-3 text-slate-300 text-sm",children:new Date(s.expiresAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:s.status==="ACTIVE"&&e.jsx("button",{onClick:()=>f(s.id),className:"text-red-400 hover:text-red-300",title:"Revoke",children:e.jsx(R,{})})})]},s.id)})})]}),m.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No licenses found"})]})]})}export{I as default};
