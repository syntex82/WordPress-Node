import{r as i,j as e,L as u}from"./vendor-react-D2QycniR.js";import{x as O,c9 as v,j as z,B as W,aR as X,A as F,c as L,b as Y,G as Z,aK as ee,I as se,z as k}from"./index-4Xu9g3kZ.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function ne(){const t=O(),[w,D]=i.useState([]),[I,P]=i.useState([]),[T,$]=i.useState(!0),[C,g]=i.useState(null),[n,d]=i.useState(1),[x,R]=i.useState(1),[j,B]=i.useState(0),[m,H]=i.useState(""),[p,V]=i.useState(""),[h,_]=i.useState(""),[S,G]=i.useState("");i.useEffect(()=>{U()},[]),i.useEffect(()=>{b()},[n,m,p,h]);const U=async()=>{try{const{data:s}=await v.getCategories();P(s||[])}catch(s){console.error("Failed to load categories:",s)}},b=async()=>{var s,l,r,o,c;try{$(!0),g(null);const{data:a}=await v.getCourses({page:n,limit:10,status:m||void 0,category:p||void 0});let f=(a==null?void 0:a.courses)||[];if(h){const N=h.toLowerCase();f=f.filter(y=>{var E,A,M;return y.title.toLowerCase().includes(N)||((E=y.shortDescription)==null?void 0:E.toLowerCase().includes(N))||((M=(A=y.instructor)==null?void 0:A.name)==null?void 0:M.toLowerCase().includes(N))})}D(f),R(((s=a==null?void 0:a.pagination)==null?void 0:s.pages)||1),B(((l=a==null?void 0:a.pagination)==null?void 0:l.total)||0)}catch(a){console.error("Failed to load courses:",a),((r=a.response)==null?void 0:r.status)===401?g("Please log in to access courses."):g(((c=(o=a.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to load courses. Please try again.")}finally{$(!1)}},q=s=>{s.preventDefault(),_(S),d(1)},Q=async s=>{var l,r;if(confirm("Are you sure you want to delete this course? This will also delete all lessons, quizzes, and enrollments."))try{await v.deleteCourse(s),k.success("Course deleted successfully"),b()}catch(o){console.error("Failed to delete course:",o);const c=((r=(l=o.response)==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete course";k.error(c)}},K=s=>{const l={DRAFT:"bg-slate-500/20 text-slate-300",PUBLISHED:"bg-green-500/20 text-green-400",ARCHIVED:"bg-yellow-500/20 text-yellow-400"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l[s]||"bg-slate-500/20 text-slate-300"}`,children:s})},J=s=>{const l={BEGINNER:"bg-blue-500/20 text-blue-400",INTERMEDIATE:"bg-purple-500/20 text-purple-400",ADVANCED:"bg-red-500/20 text-red-400",ALL_LEVELS:"bg-teal-500/20 text-teal-400"},r={BEGINNER:"Beginner",INTERMEDIATE:"Intermediate",ADVANCED:"Advanced",ALL_LEVELS:"All Levels"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l[s]||"bg-slate-500/20 text-slate-300"}`,children:r[s]||s})};return e.jsxs("div",{className:`min-h-screen p-6 ${t.page}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t.titleGradient}`,children:"Courses"}),e.jsxs("p",{className:`text-sm mt-1 ${t.textMuted}`,children:[j," courses total"]})]}),e.jsxs(u,{to:"/lms/courses/new",className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-4 py-2 rounded-xl hover:from-blue-500 hover:to-blue-400 flex items-center gap-2 transition-all shadow-lg shadow-blue-500/20",children:[e.jsx(z,{size:18}),"Create Course"]})]}),e.jsx("div",{className:`backdrop-blur rounded-xl border p-4 mb-6 ${t.card}`,children:e.jsxs("form",{onSubmit:q,className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(W,{className:`absolute left-3 top-1/2 -translate-y-1/2 ${t.textMuted}`}),e.jsx("input",{type:"text",placeholder:"Search courses by title, description, or instructor...",value:S,onChange:s=>G(s.target.value),className:`w-full rounded-xl pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none ${t.input}`})]}),e.jsxs("select",{value:m,onChange:s=>{H(s.target.value),d(1)},className:`rounded-xl px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none ${t.select}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"DRAFT",children:"Draft"}),e.jsx("option",{value:"PUBLISHED",children:"Published"}),e.jsx("option",{value:"ARCHIVED",children:"Archived"})]}),e.jsxs("select",{value:p,onChange:s=>{V(s.target.value),d(1)},className:`rounded-xl px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none ${t.select}`,children:[e.jsx("option",{value:"",children:"All Categories"}),I.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("button",{type:"submit",className:`px-4 py-2 rounded-xl transition-colors ${t.buttonSecondary}`,children:"Search"})]})}),T?e.jsx("div",{className:`backdrop-blur rounded-xl border p-8 flex justify-center ${t.card}`,children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-slate-700 border-t-blue-500"})}):C?e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:[e.jsx("p",{className:"text-red-400 font-medium",children:C}),e.jsx("button",{onClick:b,className:"mt-3 text-red-300 hover:text-red-200 font-medium",children:"Try Again"})]}):w.length===0?e.jsxs("div",{className:`backdrop-blur rounded-xl border p-12 text-center ${t.card}`,children:[e.jsx(X,{className:`mx-auto mb-4 ${t.textMuted}`,size:48}),e.jsx("h3",{className:`text-lg font-medium mb-2 ${t.textPrimary}`,children:"No courses found"}),e.jsx("p",{className:`mb-4 ${t.textMuted}`,children:h||m||p?"Try adjusting your filters or search terms":"Get started by creating your first course"}),!h&&!m&&!p&&e.jsxs(u,{to:"/lms/courses/new",className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700",children:[e.jsx(z,{size:18}),"Create Course"]})]}):e.jsxs("div",{className:`backdrop-blur rounded-xl border overflow-hidden ${t.card}`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:`min-w-full divide-y ${t.border}`,children:[e.jsx("thead",{className:t.tableHeader,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Course"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Instructor"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Price"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Content"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Enrollments"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${t.textMuted}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t.border}`,children:w.map(s=>{var l,r,o,c;return e.jsxs("tr",{className:t.tableRow,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 w-14 h-10 rounded-lg overflow-hidden ${t.isDark?"bg-slate-700":"bg-gray-200"}`,children:e.jsx("img",{src:s.featuredImage||"/api/lms/courses/placeholder-image",alt:"",className:"w-full h-full object-cover",onError:a=>{a.target.src="/api/lms/courses/placeholder-image"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`font-medium ${t.textPrimary}`,children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`text-xs ${t.textMuted}`,children:s.category||"Uncategorized"}),s.level&&J(s.level)]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:s.instructor?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xs font-medium mr-2",children:((l=s.instructor.name)==null?void 0:l.charAt(0).toUpperCase())||"?"}),e.jsx("span",{className:`text-sm ${t.textPrimary}`,children:s.instructor.name})]}):e.jsx("span",{className:`text-sm ${t.textMuted}`,children:"No instructor"})}),e.jsx("td",{className:"px-6 py-4",children:K(s.status)}),e.jsx("td",{className:"px-6 py-4",children:s.priceType==="PAID"?e.jsxs("span",{className:`font-medium ${t.textPrimary}`,children:["$",Number(s.priceAmount||0).toFixed(2)]}):e.jsx("span",{className:"text-green-400 font-medium",children:"Free"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`flex items-center justify-center gap-4 text-sm ${t.textMuted}`,children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Lessons",children:[e.jsx(F,{size:14}),e.jsx("span",{children:((r=s._count)==null?void 0:r.lessons)||0})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Quizzes",children:[e.jsx(L,{size:14}),e.jsx("span",{children:((o=s._count)==null?void 0:o.quizzes)||0})]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:`flex items-center justify-center gap-1 ${t.textMuted}`,children:[e.jsx(Y,{size:14}),e.jsx("span",{className:"font-medium",children:((c=s._count)==null?void 0:c.enrollments)||0})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(u,{to:`/lms/courses/${s.id}`,className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Edit Course",children:e.jsx(Z,{size:16})}),e.jsx(u,{to:`/lms/courses/${s.id}/curriculum`,className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition-colors",title:"Curriculum Builder",children:e.jsx(ee,{size:16})}),e.jsx(u,{to:`/lms/courses/${s.id}/lessons`,className:"p-2 text-green-400 hover:bg-green-500/20 rounded-lg transition-colors",title:"Manage Lessons",children:e.jsx(F,{size:16})}),e.jsx(u,{to:`/lms/courses/${s.id}/quizzes`,className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Manage Quizzes",children:e.jsx(L,{size:16})}),e.jsx("button",{onClick:()=>Q(s.id),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"Delete Course",children:e.jsx(se,{size:16})})]})})]},s.id)})})]})}),x>1&&e.jsxs("div",{className:`px-6 py-4 border-t flex items-center justify-between ${t.border} ${t.tableHeader}`,children:[e.jsxs("p",{className:`text-sm ${t.textMuted}`,children:["Showing ",(n-1)*10+1," to ",Math.min(n*10,j)," of ",j," courses"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(s=>Math.max(1,s-1)),disabled:n===1,className:`px-4 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${t.buttonSecondary}`,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x)},(s,l)=>{let r=l+1;return x>5&&n>3&&(r=Math.min(n-2+l,x)),e.jsx("button",{onClick:()=>d(r),className:`w-10 h-10 rounded-xl transition-colors ${n===r?"bg-blue-600 text-white":t.buttonSecondary}`,children:r},r)})}),e.jsx("button",{onClick:()=>d(s=>Math.min(x,s+1)),disabled:n===x,className:`px-4 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${t.buttonSecondary}`,children:"Next"})]})]})]})]})}export{ne as default};
