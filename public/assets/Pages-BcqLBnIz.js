import{r as i,j as e,a as P}from"./vendor-react-D2QycniR.js";import{Q as j,g as F,v as z,w as $,z as x,x as D,q as S,T as n,c as I,j as A,B as T,M as L,G as O,H as E,I as H}from"./index-Bpp1ZX0C.js";import{L as M}from"./LoadingSpinner-BUnjBwPP.js";import{C as B}from"./ConfirmDialog-CIfAj9N-.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";const R=({pageId:c,pageName:s,onClose:p})=>{const[g,d]=i.useState(!1),[u,f]=i.useState(null),[l,r]=i.useState({layout:"default",showHeader:!0,showFooter:!0,showSidebar:!1,customCSS:"",backgroundColor:"#ffffff",textColor:"#000000",headerStyle:"default",footerStyle:"default",featuredImagePosition:"top"});i.useEffect(()=>{b()},[c]);const b=async()=>{try{d(!0);const t=await j.getByPageId(c);t.data&&(f(t.data),r(t.data))}catch(t){console.error("Failed to load customization:",t)}finally{d(!1)}},m=async()=>{try{d(!0),u!=null&&u.id?(await j.update(u.id,l),x.success("Page customization updated!")):(await j.create({...l,pageId:c}),x.success("Page customization created!")),b()}catch(t){x.error("Failed to save customization"),console.error(t)}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"text-white text-xl"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-bold text-lg",children:"Customize Page"}),e.jsx("p",{className:"text-blue-100 text-sm",children:s})]})]}),e.jsx("button",{onClick:p,className:"text-white hover:bg-blue-800 p-2 rounded-lg transition",children:e.jsx(z,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Layout"}),e.jsxs("select",{value:l.layout,onChange:t=>r({...l,layout:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"default",children:"Default"}),e.jsx("option",{value:"full-width",children:"Full Width"}),e.jsx("option",{value:"sidebar-left",children:"Sidebar Left"}),e.jsx("option",{value:"sidebar-right",children:"Sidebar Right"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.showHeader,onChange:t=>r({...l,showHeader:t.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Header"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.showFooter,onChange:t=>r({...l,showFooter:t.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Footer"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.showSidebar,onChange:t=>r({...l,showSidebar:t.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Sidebar"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Background Color"}),e.jsx("input",{type:"color",value:l.backgroundColor,onChange:t=>r({...l,backgroundColor:t.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:l.textColor,onChange:t=>r({...l,textColor:t.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx($,{size:16}),"Custom CSS"]}),e.jsx("textarea",{value:l.customCSS,onChange:t=>r({...l,customCSS:t.target.value}),placeholder:"/* Add custom CSS here */",className:"w-full h-32 px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex gap-3 border-t border-gray-200",children:[e.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100 transition font-medium",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:g,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition font-medium disabled:opacity-50",children:g?"Saving...":"Save Changes"})]})]})})},o={addNew:{title:"Create New Page",content:"Create a static page like About, Contact, or Services. Pages don't have dates like posts."},search:{title:"Search Pages",content:"Find pages by title. Start typing to filter the list."},statusFilter:{title:"Filter by Status",content:"Show only published pages, drafts, or all pages."},edit:{title:"Edit Page",content:"Open the page editor to modify content, title, or settings."},view:{title:"View Page",content:"Preview how this page looks on your website."},customize:{title:"Customize Style",content:"Adjust the visual appearance of this specific page."},delete:{title:"Delete Page",content:"Permanently remove this page. This action cannot be undone."}};function X(){const c=P(),s=D(),[p,g]=i.useState([]),[d,u]=i.useState(!0),[f,l]=i.useState(""),[r,b]=i.useState("all"),[m,t]=i.useState({isOpen:!1,pageId:null}),[h,y]=i.useState({isOpen:!1,pageId:null,pageName:null});i.useEffect(()=>{v()},[]);const v=async()=>{try{const a=await S.getAll();g(a.data.data)}catch{x.error("Failed to load pages")}finally{u(!1)}},C=async a=>{try{await S.delete(a),x.success("Page deleted successfully"),v(),t({isOpen:!1,pageId:null})}catch{x.error("Failed to delete page")}},N=p.filter(a=>{const w=a.title.toLowerCase().includes(f.toLowerCase()),k=r==="all"||a.status===r;return w&&k});return d?e.jsx(M,{}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:`text-3xl font-bold ${s.titleGradient}`,children:"Pages"}),e.jsx(n,{title:"About Pages",content:"Static pages are timeless content like About, Contact, or Services. Unlike posts, they don't appear in your blog feed.",position:"right",variant:"help",children:e.jsx("button",{className:`p-1 ${s.icon} hover:text-blue-400`,children:e.jsx(I,{size:18})})})]}),e.jsx(n,{title:o.addNew.title,content:o.addNew.content,position:"left",children:e.jsxs("button",{onClick:()=>c("/pages/new"),className:"flex items-center bg-gradient-to-r from-emerald-600 to-emerald-500 text-white px-4 py-2 rounded-xl hover:from-emerald-500 hover:to-emerald-400 shadow-lg shadow-emerald-500/20 transition-all",children:[e.jsx(A,{className:"mr-2",size:18}),"Add New Page"]})})]}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsx(n,{title:o.search.title,content:o.search.content,position:"bottom",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(T,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${s.icon}`,size:20}),e.jsx("input",{type:"text",placeholder:"Search pages...",value:f,onChange:a=>l(a.target.value),className:`w-full pl-10 pr-4 py-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 ${s.input}`})]})}),e.jsx(n,{title:o.statusFilter.title,content:o.statusFilter.content,position:"bottom",children:e.jsxs("select",{value:r,onChange:a=>b(a.target.value),className:`px-4 py-2.5 rounded-lg focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 ${s.select}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"PUBLISHED",children:"Published"}),e.jsx("option",{value:"DRAFT",children:"Draft"})]})})]}),e.jsx("div",{className:`backdrop-blur rounded-xl border overflow-hidden ${s.card}`,children:e.jsxs("table",{className:`min-w-full divide-y ${s.border}`,children:[e.jsx("thead",{className:s.tableHeader,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s.textMuted}`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s.textMuted}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s.textMuted}`,children:"Date"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium uppercase ${s.textMuted}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${s.border}`,children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:`px-6 py-12 text-center ${s.textMuted}`,children:"No pages found"})}):N.map(a=>e.jsxs("tr",{className:s.tableRow,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`text-sm font-medium ${s.textPrimary}`,children:a.title})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.status==="PUBLISHED"?s.badgeSuccess:s.badgeWarning}`,children:a.status})}),e.jsx("td",{className:`px-6 py-4 text-sm ${s.textMuted}`,children:new Date(a.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm font-medium",children:[e.jsx(n,{title:o.view.title,content:o.view.content,position:"top",children:e.jsx("button",{onClick:()=>window.open(`http://localhost:3000/${a.slug}`,"_blank"),className:`mr-3 transition-colors ${s.icon} ${s.iconHover}`,children:e.jsx(L,{size:18})})}),e.jsx(n,{title:o.edit.title,content:o.edit.content,position:"top",children:e.jsx("button",{onClick:()=>c(`/pages/edit/${a.id}`),className:"text-blue-400 hover:text-blue-300 mr-3 transition-colors",children:e.jsx(O,{size:18})})}),e.jsx(n,{title:o.customize.title,content:o.customize.content,position:"top",children:e.jsx("button",{onClick:()=>y({isOpen:!0,pageId:a.id,pageName:a.title}),className:"text-purple-400 hover:text-purple-300 mr-3 transition-colors",children:e.jsx(E,{size:18})})}),e.jsx(n,{title:o.delete.title,content:o.delete.content,position:"top",variant:"warning",children:e.jsx("button",{onClick:()=>t({isOpen:!0,pageId:a.id}),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(H,{size:18})})})]})]},a.id))})]})}),e.jsx(B,{isOpen:m.isOpen,title:"Delete Page",message:"Are you sure you want to delete this page? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",onConfirm:()=>m.pageId&&C(m.pageId),onCancel:()=>t({isOpen:!1,pageId:null})}),h.isOpen&&h.pageId&&h.pageName&&e.jsx(R,{pageId:h.pageId,pageName:h.pageName,onClose:()=>y({isOpen:!1,pageId:null,pageName:null})})]})}export{X as default};
