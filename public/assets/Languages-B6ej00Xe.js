import{r as i,j as e}from"./vendor-react-D2QycniR.js";import{R as T,S as f,O as I,j as $,U as q,al as N,G,I as O,W as c}from"./index-DAV1T9UC.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";const h={code:"",name:"",nativeName:"",isRTL:!1,flagEmoji:"",locale:""};function H(){const{refreshTranslations:y}=T(),[u,k]=i.useState([]),[v,w]=i.useState(!0),[p,n]=i.useState(null),[L,g]=i.useState(!1),[o,m]=i.useState(null),[t,l]=i.useState(h),[b,j]=i.useState(!1),x=async()=>{try{const a=await c.get("/i18n/languages?includeInactive=true");k(a.data)}catch{n("Failed to load languages")}finally{w(!1)}};i.useEffect(()=>{x()},[]);const S=async a=>{var s,r;a.preventDefault(),j(!0),n(null);try{o?await c.put(`/i18n/languages/${o}`,t):await c.post("/i18n/languages",t),await x(),await y(),g(!1),m(null),l(h)}catch(d){n(((r=(s=d.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to save language")}finally{j(!1)}},C=a=>{l({code:a.code,name:a.name,nativeName:a.nativeName,isRTL:a.isRTL,flagEmoji:a.flagEmoji||"",locale:a.locale||""}),m(a.id),g(!0)},E=async a=>{var s,r;if(confirm("Are you sure you want to delete this language? All translations will be lost."))try{await c.delete(`/i18n/languages/${a}`),await x(),await y()}catch(d){n(((r=(s=d.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete language")}},F=async a=>{var s,r;try{await c.put(`/i18n/languages/${a}`,{isDefault:!0}),await x()}catch(d){n(((r=(s=d.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to set default language")}},A=async(a,s)=>{var r,d;try{await c.put(`/i18n/languages/${a}`,{isActive:!s}),await x()}catch(R){n(((d=(r=R.response)==null?void 0:r.data)==null?void 0:d.message)||"Failed to update language")}},D=async()=>{var a,s;try{await c.post("/i18n/seed"),await x()}catch(r){n(((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to seed languages")}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(f,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Languages"})]}),e.jsxs("div",{className:"flex gap-2",children:[u.length===0&&e.jsx("button",{onClick:D,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Seed Default Languages"}),e.jsxs("button",{onClick:()=>{g(!0),m(null),l(h)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx($,{className:"w-4 h-4"}),"Add Language"]})]})]}),p&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(q,{className:"w-5 h-5"}),p]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:o?"Edit Language":"Add Language"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Code (ISO 639-1)"}),e.jsx("input",{type:"text",value:t.code,onChange:a=>l({...t,code:a.target.value.toLowerCase()}),placeholder:"en",maxLength:5,disabled:!!o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Flag Emoji"}),e.jsx("input",{type:"text",value:t.flagEmoji,onChange:a=>l({...t,flagEmoji:a.target.value}),placeholder:"ðŸ‡¬ðŸ‡§",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name (English)"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>l({...t,name:a.target.value}),placeholder:"English",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Native Name"}),e.jsx("input",{type:"text",value:t.nativeName,onChange:a=>l({...t,nativeName:a.target.value}),placeholder:"English",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Locale"}),e.jsx("input",{type:"text",value:t.locale,onChange:a=>l({...t,locale:a.target.value}),placeholder:"en-GB",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isRTL",checked:t.isRTL,onChange:a=>l({...t,isRTL:a.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"isRTL",className:"text-sm text-gray-700 dark:text-gray-300",children:"Right-to-Left (RTL) language"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),m(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[b&&e.jsx(f,{className:"w-4 h-4 animate-spin"}),o?"Update":"Create"]})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:"Language"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:"Default"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(a=>e.jsxs("tr",{className:a.isActive?"":"opacity-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.flagEmoji&&e.jsx("span",{className:"text-xl",children:a.flagEmoji}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.nativeName}),e.jsx("div",{className:"text-sm text-gray-500",children:a.name})]}),a.isRTL&&e.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 px-2 py-0.5 rounded",children:"RTL"})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400 font-mono",children:a.code}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>A(a.id,a.isActive),className:`px-2 py-1 rounded text-xs font-medium ${a.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:a.isDefault?e.jsx(N,{className:"w-5 h-5 text-yellow-500 mx-auto fill-current"}):e.jsx("button",{onClick:()=>F(a.id),className:"text-gray-400 hover:text-yellow-500",title:"Set as default",children:e.jsx(N,{className:"w-5 h-5 mx-auto"})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>C(a),className:"p-1 text-gray-500 hover:text-blue-600",title:"Edit",children:e.jsx(G,{className:"w-4 h-4"})}),!a.isDefault&&e.jsx("button",{onClick:()=>E(a.id),className:"p-1 text-gray-500 hover:text-red-600",title:"Delete",children:e.jsx(O,{className:"w-4 h-4"})})]})})]},a.id))})]}),u.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:'No languages configured. Click "Seed Default Languages" to add common languages.'})]})]})}export{H as default};
