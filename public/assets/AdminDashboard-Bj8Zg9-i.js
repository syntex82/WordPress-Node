import{r as n,j as e,L as r}from"./vendor-react-D2QycniR.js";import{c9 as p,z as h,j as u,aR as g,b,c4 as f,d as j,M as N,ca as v}from"./index-DAV1T9UC.js";import"./vendor-editor-Cn7QR8gj.js";import"./vendor-utils-BWf5C302.js";import"./vendor-socket-CA1CrNgP.js";function z(){const[s,x]=n.useState(null),[d,c]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{var t,a;try{const{data:l}=await p.getDashboardStats();x(l)}catch(l){h.error(((a=(t=l.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to load dashboard")}finally{c(!1)}};return d?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-slate-700 border-t-blue-500"})}):s?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent truncate",children:"LMS Dashboard"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-400 mt-0.5 hidden sm:block",children:"Manage courses and track enrollments"})]}),e.jsxs(r,{to:"/lms/courses/new",className:"flex items-center justify-center gap-1.5 sm:gap-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white px-3 sm:px-4 py-2.5 rounded-lg sm:rounded-xl hover:from-blue-500 hover:to-blue-400 shadow-lg shadow-blue-500/20 transition-all touch-manipulation active:scale-95 text-xs sm:text-sm font-medium whitespace-nowrap min-h-[44px] flex-shrink-0",children:[e.jsx(u,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),e.jsx("span",{className:"hidden xs:inline sm:inline",children:"Create Course"}),e.jsx("span",{className:"xs:hidden sm:hidden",children:"New"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 p-3 sm:p-4 lg:p-6 border-l-4 border-l-blue-500 touch-manipulation active:scale-[0.98] transition-transform",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:"Total Courses"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white tabular-nums mt-0.5 sm:mt-1",children:s.courses.total}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 mt-0.5 sm:mt-1 truncate",children:[s.courses.published," pub, ",s.courses.draft," draft"]})]}),e.jsx("div",{className:"bg-blue-500/20 text-blue-400 p-2 sm:p-2.5 lg:p-3 rounded-lg sm:rounded-xl flex-shrink-0 self-start sm:self-center",children:e.jsx(g,{size:18,className:"sm:w-5 sm:h-5 lg:w-6 lg:h-6"})})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 p-3 sm:p-4 lg:p-6 border-l-4 border-l-green-500 touch-manipulation active:scale-[0.98] transition-transform",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:"Enrollments"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white tabular-nums mt-0.5 sm:mt-1",children:s.enrollments.total}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 mt-0.5 sm:mt-1 truncate",children:[s.enrollments.active," active"]})]}),e.jsx("div",{className:"bg-green-500/20 text-green-400 p-2 sm:p-2.5 lg:p-3 rounded-lg sm:rounded-xl flex-shrink-0 self-start sm:self-center",children:e.jsx(b,{size:18,className:"sm:w-5 sm:h-5 lg:w-6 lg:h-6"})})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 p-3 sm:p-4 lg:p-6 border-l-4 border-l-yellow-500 touch-manipulation active:scale-[0.98] transition-transform",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:"Revenue"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white tabular-nums mt-0.5 sm:mt-1",children:["$",s.revenue>=1e3?`${(s.revenue/1e3).toFixed(1)}k`:s.revenue.toFixed(0)]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 mt-0.5 sm:mt-1 truncate",children:"Total earnings"})]}),e.jsx("div",{className:"bg-yellow-500/20 text-yellow-400 p-2 sm:p-2.5 lg:p-3 rounded-lg sm:rounded-xl flex-shrink-0 self-start sm:self-center",children:e.jsx(f,{size:18,className:"sm:w-5 sm:h-5 lg:w-6 lg:h-6"})})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 p-3 sm:p-4 lg:p-6 border-l-4 border-l-purple-500 touch-manipulation active:scale-[0.98] transition-transform",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:"Completion"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white tabular-nums mt-0.5 sm:mt-1",children:[s.enrollments.total>0?(s.enrollments.completed/s.enrollments.total*100).toFixed(0):0,"%"]}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 mt-0.5 sm:mt-1 truncate",children:[s.enrollments.completed," done"]})]}),e.jsx("div",{className:"bg-purple-500/20 text-purple-400 p-2 sm:p-2.5 lg:p-3 rounded-lg sm:rounded-xl flex-shrink-0 self-start sm:self-center",children:e.jsx(j,{size:18,className:"sm:w-5 sm:h-5 lg:w-6 lg:h-6"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 overflow-hidden",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-700/50 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-bold text-white text-sm sm:text-base truncate flex-1",children:"Top Courses"}),e.jsx(r,{to:"/lms/courses",className:"text-blue-400 text-xs sm:text-sm hover:text-blue-300 transition-colors whitespace-nowrap touch-manipulation min-h-[44px] flex items-center px-2 active:text-blue-200",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-700/50",children:s.topCourses.length===0?e.jsx("div",{className:"p-6 sm:p-8 text-center text-slate-500 text-sm",children:"No courses yet"}):s.topCourses.map(t=>{var a,l;return e.jsxs("div",{className:"p-3 sm:p-4 flex items-center gap-2 sm:gap-3 lg:gap-4 hover:bg-slate-700/30 transition-colors touch-manipulation active:bg-slate-700/40",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-white text-xs sm:text-sm lg:text-base truncate",children:t.title}),e.jsxs("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:[((a=t._count)==null?void 0:a.lessons)||0," lessons â€¢ ",((l=t._count)==null?void 0:l.enrollments)||0," students"]})]}),e.jsxs("div",{className:"flex gap-0.5 sm:gap-1 lg:gap-2 flex-shrink-0",children:[e.jsx(r,{to:`/lms/course/${t.slug}`,className:"p-2.5 text-slate-500 hover:text-blue-400 transition-colors touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center active:text-blue-300 rounded-lg hover:bg-slate-700/30","aria-label":"View course",children:e.jsx(N,{size:16,className:"sm:w-[18px] sm:h-[18px]"})}),e.jsx(r,{to:`/lms/courses/${t.id}`,className:"p-2.5 text-slate-500 hover:text-green-400 transition-colors touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center active:text-green-300 rounded-lg hover:bg-slate-700/30","aria-label":"Edit course",children:e.jsx(v,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]})]},t.id)})})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur rounded-lg sm:rounded-xl border border-slate-700/50 overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-slate-700/50",children:e.jsx("h2",{className:"font-bold text-white text-sm sm:text-base",children:"Recent Enrollments"})}),e.jsx("div",{className:"divide-y divide-slate-700/50",children:s.recentEnrollments.length===0?e.jsx("div",{className:"p-6 sm:p-8 text-center text-slate-500 text-sm",children:"No enrollments yet"}):s.recentEnrollments.map(t=>{var a,l,m,i;return e.jsxs("div",{className:"p-3 sm:p-4 flex items-center gap-2 sm:gap-3 lg:gap-4 hover:bg-slate-700/30 transition-colors touch-manipulation",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 lg:w-10 lg:h-10 bg-slate-700 rounded-full flex items-center justify-center text-slate-300 font-medium text-xs sm:text-sm flex-shrink-0",children:((l=(a=t.user)==null?void 0:a.name)==null?void 0:l.charAt(0))||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-white text-xs sm:text-sm lg:text-base truncate",children:((m=t.user)==null?void 0:m.name)||"Unknown"}),e.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm text-slate-400 truncate",children:(i=t.course)==null?void 0:i.title})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-slate-500 whitespace-nowrap flex-shrink-0 hidden xs:block",children:new Date(t.enrolledAt).toLocaleDateString()})]},t.id)})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-slate-900 p-4 sm:p-6 text-center text-red-400",children:"Failed to load dashboard"})}export{z as default};
